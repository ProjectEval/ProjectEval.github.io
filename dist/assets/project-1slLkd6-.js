import{r as a,g as C,i as O,j as e,o as z,p as L,q as M,t as F,u as Y,c as q,R as D}from"./auth-OIc4apUQ.js";import{E as G}from"./square_pencil-nCEf_pik.js";import{S as J}from"./search_bar-DzdhLxBV.js";import{B as K}from"./back_arrow-IdcwQJqZ.js";import{C as V}from"./close-KeMSzLwU.js";const Z="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADoAAAAoCAYAAACvpem4AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAOqADAAQAAAABAAAAKAAAAAC5i28WAAAD3UlEQVRoBe2YTYiNURjH7zUT46uGSNSMkY+NsMKGUiKUBRpJRikZZBozJYvJ2FlZGQsbzIbsJNlIjISJsTCRbEaIQYpiUMxcv//1nttz3/vx3pnunfu+N6f+9zznOc855/m95/288VgFl0Qi0QjeBnQ5XqmcQLbAdsTjG55QiaBAToVrq2GrqjhQIGvj8fgQkE3ojQc7YKCjbwJ5GN1Hi0RDPRedR7OjT+cRACPIl54eUC+2cBVxMxIkUK0WDPspp/BO54v8NZoDUtdmGnikdzQPZBO7+cHtpurI7iiQh/y7Rls7mQGJL5a2owyeiG8JmomqURhKP7vz2SbiQR61PuyckIpLwjBwCvYxtB3VoLCU6yRy1yYzFkiNjzNwEvUltEyOEBVBHmc3h11OY4XUeO3oLmQh39HuR79QucogC3cBOeISAPIgtv90fY1vr//G48bYWqBbjOM2dgsD/xhf2U0Pss2XSMGQGifQhWaCixGC1N31o8k9r6nHy3QTUfBAM6ZkJjvZzOTZdjINkri6oCRC+xz1INt9ADpd/ZAr8J3xxWU0Qwk6SsgLUNmzMgNSjtCBjgJyPvkLcppAgkqoQIE8QMKBp6sHVU9dEKTik29G3sCcFQmsplNHsI873YA/kP45+NagL6iHmBEbQ78O6Do0A92j/xN1WiFG34+FQqaNLaQRCEoCp5hohzfZMO0OEr3qJqe9Cvsc0v80Ko/w7SMm+SzG1hrdaCVSGcLXTP/jf83Ur74p46lWLJZx4zF9ozbznroehIPU5FWoE/9ks9JJbAcpt8AbZXhFH78OUi7FakyqMN8CGptSjljsCfYeDkbRHndBO9pgFnemPgBmobeeo8GrbaXT3JUGZ5ja9sutazOBbqBuAPupi1ry7igr6fTyvw4K8L3J4qGxndnrDOqgfoVeQ+sBbC8FpBbIC8qir4jpQD8UTBFkK/7UFwXtE8jtgPx6Ge+hThbsOxhnkRuj2M5kp/dDTC8atL6i21wf7p8z1f5TKrmerklUh3IeGPrmoZwPbvUpplgAzLUWudxvBc0bdI0mx3O0f2K4azLrnMTY0zkjhv5vOKWylJw7VJZsSrjof9ASHtyyTK0dta9rVWXJYmyL2lwtQ9bZBPrV9OgNJSrF5qp37LxFoM9NRBu37HrTDqVJjktJbL9J7pmxs5r6u3MjPV2+Xv1hXM5/AX3ppDX1aVZrPHp13Mbj64XxZZjVBNwE9go9+tvTFb3LRqWcDoIUSNzRALsZezdajmqcP6T1d/LqQ/oAyPYunZF2CtT2AK3PsILemuy4cbJ/AxfWy2qcDkGeZf4Cc8h27wSduccAAAAASUVORK5CYII=",X="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAkCAYAAAAHKVPcAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIaADAAQAAAABAAAAJAAAAADeoA9wAAACe0lEQVRYCe2Xz0sVURTH35RQ0Q+CwjBbFSGRtpHAldIqSMJCkhRBEdxEm8hVO1f+Abpq4cYWCaItwghqV7SIIiiCsh8rFwa2iKDA7PX5yryh0TdzzrxRh6ADX+bOufec83l37r0zr1TKYeVyuQ4dRjtzpCkFWYMpuJuYfnQRNSHl+I3eoHtoOgiCX1zdlgkCgNNknkBHUyp8pu8aIJ9SxsS63BAAtBA5hfbEMlS/+Ya7BxABmeaCAGAvme6jtBlYX2wBxyXPo9mxPjLhfgB/FgClOYm61bDMC9FjJUrov5Lgj7lNCB7FCSIaYlH+m2biD1jDTQgSHLOSpPRrzZmP0QOhRZnHzN3kgVjOQ0DsVyveA/GBJGUrUUL/d/yLCX2R24Rgn2smXkcR2RpPN/OcmMxWOxrtijNnIkz3kOuzKLWvMcssvPIMdR3bSsR+P8TlDjque8Ne0j8ExA9j3Fq3dyZK4dq4StTjlMRawDNo0AugXO6Z0OCKMStnaXehZnQQafHq189R/C3X//bvzkCmNcFaqOOnnkJ6szaifWgX+on0NaXT8T1aYG3ou9NlJgSF9QK6gM6jNqSilum4foLm0SOAVtMCEiEorrfnYCjzmyClyBf6bqO7wKxUG1cVAoBzDB5FR6oF1ej7SNwtQDacojEIiuv+JhqusZAVpv8jY4Do5I0sgggBxui5HPVuXWMCkPFK+r+P7ZFtAlDt6/zo3grE2kzg6MChxbOdpkXazYy8CwDQ3terOs8Hba3wL4Do0+PoLAhA4K1MQmsFQo6irFMQZ4qqHtZtEYTO/yJtvyCeF0mg+tod+na8gdpRPYoOMNpbZXqhLaEHaPwPvyyQ75+5xTcAAAAASUVORK5CYII=";function H({name:o,id:c,projectId:A,classId:i,projectName:P}){const[l,d]=a.useState(!1);return a.useEffect(()=>{(async()=>{const s=await C(),p=await O(s);(s==c||p)&&d(!0)})()},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"StudentTile",children:[e.jsx("h2",{className:"StudentName",children:o}),l?e.jsx("img",{src:X,alt:"view user profile",className:"PersonIcon",onClick:()=>{const s=new URL(window.location.origin);s.searchParams.set("projectId",A),s.searchParams.set("studentId",c),s.searchParams.set("classId",i),window.location.href=s.origin+"/Project/StudentProfile/"+s.search}}):e.jsx("img",{src:Z,alt:"evaluate student",className:"EvalIcon",onClick:()=>{const s=new URL(window.location.origin);s.searchParams.set("name",o),s.searchParams.set("projectId",A),s.searchParams.set("studentId",c),s.searchParams.set("classId",i),window.location.href=s.origin+"/Project/EvalStudent/"+s.search}})]})})}function W(){const[o,c]=a.useState([]),[A,i]=a.useState([]),[P,l]=a.useState([]),[d,s]=a.useState(""),[p,E]=a.useState(!1),[j,b]=a.useState(""),[u,Q]=a.useState(""),w=a.useRef(null),m=a.useRef(null),[x,f]=a.useState(""),[U,k]=a.useState("");a.useEffect(()=>{S(),console.log(o)},[]);async function S(){var B;const t=await C();k(t);const h=window.location.search,r=new URLSearchParams(h);if(!r.has("classId"))throw Error("missing class id!");if(!r.has("projectId"))throw Error("missing project id!");const n=r.get("classId");Q(n);const g=r.get("projectId"),N=await z(n,g);s(N.name),f(N.name),b(g);const I=await L(n,g);console.log(I),c(I),l(I);const v=await M(n);i(v);const y=localStorage.getItem("userType");let R=!1;y=="Teacher"&&(E(!0),R=!0),R&&(await F(n,g)).length==0&&((B=w.current)==null||B.showModal())}const T=async()=>{var h;const t=[];P.forEach(r=>{t.push(r.id)}),await Y(u,j,x,t),(h=m.current)==null||h.close(),await S()};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"Center",children:[e.jsx("h2",{className:"Title",children:d}),p?e.jsx("img",{src:G,alt:"edit project",className:"EditIcon",onClick:()=>{var t;(t=m.current)==null||t.showModal()}}):null,e.jsx("img",{src:K,alt:"back",className:"BackArrow",onClick:()=>{const t=new URL(window.location.href);t.searchParams.delete("projectId"),window.location.href=t.origin+"/Projects/"+t.search}}),e.jsx("h3",{children:"Students:"}),e.jsx("div",{className:"Students",children:o.map(t=>e.jsx(H,{name:t.name,id:t.id,projectId:j,classId:u,projectName:d},t.id))}),e.jsx("br",{})]}),e.jsxs("dialog",{ref:w,className:"warningDialog",children:[e.jsx("label",{children:"This project has no evaluation template! You need to create one before you can evaluate students."}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{onClick:()=>{const t=new URL(window.location.origin);t.searchParams.set("projectId",j),t.searchParams.set("classId",u),window.location.href=t.origin+"/Project/Editor/"+t.search},children:"Create Eval Template"}),e.jsx("span",{children:" "}),e.jsx("button",{onClick:()=>{var t;(t=w.current)==null||t.close()},children:"Close"})]}),e.jsxs("dialog",{ref:m,children:[e.jsx("h2",{children:"Edit Project"}),e.jsx("img",{src:V,alt:"close",className:"CloseIcon",onClick:()=>{var t;(t=m.current)==null||t.close()}}),e.jsxs("form",{children:[e.jsx("label",{htmlFor:"projectName",children:"Project Name:"}),e.jsx("span",{children:" "}),e.jsx("input",{type:"text",name:"projectName",id:"projectName",value:x,onChange:t=>{f(t.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",children:"Students: "}),e.jsx(J,{name:"Student",currentUserId:U,content:A,defaultAddedContent:o,updateContent:t=>{l(t)}}),e.jsx("br",{}),e.jsx("button",{type:"button",onClick:()=>{const t=new URL(window.location.origin);t.searchParams.set("projectId",j),t.searchParams.set("classId",u),window.location.href=t.origin+"/Project/Editor/"+t.search},children:"Edit Project Template"}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{type:"button",onClick:T,children:"Edit Project"})]})]})]})}async function _(){await C()||(window.location.href=window.location.origin+"/Login/")}(async()=>await _())();q.createRoot(document.getElementById("root")).render(e.jsx(D.StrictMode,{children:e.jsx(W,{})}));
