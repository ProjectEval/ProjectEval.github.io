import{j as e,r as n,g as J,D as T,q as X,E as q,v as Z,c as _,R as $}from"./auth-GtzMzfUn.js";import{B as ee}from"./back_arrow-IdcwQJqZ.js";function P({answer:t,comment:s,cardColor:r,userName:c}){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"FreeResponseSubmissionCard",style:{backgroundColor:r},children:[e.jsxs("h2",{children:["Answer: ",t," ",c!=null&&"By: "+c]}),e.jsxs("h3",{children:["Comment: ",s]})]})})}function se({answer:t,comment:s,max:r,cardColor:c,userName:A}){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"RangeSubmissionCard",style:{backgroundColor:c},children:[e.jsxs("h2",{children:["Answer: ",t," out of ",r," ",A!=null&&"By: "+A]}),e.jsxs("h3",{children:["Comment: ",s]})]})})}const te="data:image/png;base64,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",Ae="data:image/png;base64,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";function ne({average:t,cardColor:s}){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"RangeOverviewCard",style:{backgroundColor:s},children:[e.jsx("h2",{children:"Answers Overview"}),e.jsxs("h2",{children:["Average: ",e.jsx("span",{className:"Average",children:t})]})]})})}function ae({choices:t,cardColor:s}){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"MultiChoiceOverview",style:{backgroundColor:s},children:[e.jsx("h2",{children:"Answers Overview"}),e.jsx("h2",{children:"Choices:"}),e.jsx("ul",{children:t.map(r=>e.jsxs("li",{children:[r.choice,": ",r.count]}))})]})})}function re({question:t,submissions:s,cardColor:r,isCurrentStudent:c}){const[A,S]=n.useState(0),[F,B]=n.useState(0),[f,v]=n.useState([]),[m,p]=n.useState(!1);return n.useEffect(()=>{if(t.Answer.Type=="Range"){let a=0;s.forEach(d=>{a+=d.value}),B(Math.round(a/s.length))}else if(t.Answer.Type=="MultiChoice"){const a=new Map;s.forEach(o=>{a.has(o.value)?a.set(o.value,a.get(o.value)+1):a.set(o.value,1)});const d=[];a.forEach((o,g)=>{d.push({choice:g,count:o})}),v(d)}else if(t.Answer.Type=="MultiSelect"){const a=new Map;s.forEach(o=>{o.value.split(",").forEach(h=>{a.has(h)?a.set(h,a.get(h)+1):a.set(h,1)})});const d=[];a.forEach((o,g)=>{d.push({choice:g,count:o})}),v(d)}else t.Answer.Type=="FreeResponse"&&p(!0)},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"QuestionCard",children:[e.jsx("h2",{children:t.Question}),t.Answer.Type!="Range"&&t.Answer.Type!="FreeResponse"?(t.Answer.Type=="MultiChoice"||t.Answer.Type=="MultiSelect")&&A==0?e.jsx(ae,{choices:f,cardColor:r}):e.jsx(P,{cardColor:r,answer:s[A-1].value.toString(),comment:s[A-1].comment,userName:c?void 0:s[A-1].student}):t.Answer.Type=="Range"?A==0?e.jsx(ne,{cardColor:r,average:F}):e.jsx(se,{cardColor:r,answer:s[A-1].value.toString(),comment:s[A-1].comment,max:t.Answer.Max,userName:c?void 0:s[A-1].student}):e.jsx(P,{cardColor:r,answer:s[A].value.toString(),comment:s[A].comment,userName:c?void 0:s[A].student}),e.jsxs("div",{className:"Controls",children:[e.jsx("img",{src:te,alt:"Past Submission",className:"LeftSubmission "+(A==0?"Disabled":""),onClick:()=>{A>0&&S(A-1)}}),e.jsx("img",{src:Ae,alt:"Next Submission",className:"RightSubmission "+(A==(m?s.length-1:s.length)?"Disabled":""),onClick:()=>{A<(m?s.length-1:s.length)&&S(A+1)}})]})]})})}function oe(){const[t,s]=n.useState(""),[r,c]=n.useState(""),[A,S]=n.useState(""),[F,B]=n.useState(""),[f,v]=n.useState(),[m,p]=n.useState(!1),[a,d]=n.useState([]),[o,g]=n.useState([]),[h,M]=n.useState([]),[b,U]=n.useState(""),[K,W]=n.useState(""),[V,Y]=n.useState(""),[D,G]=n.useState("");return n.useEffect(()=>{async function i(){const z=window.location.search,l=new URLSearchParams(z);if(!l.has("projectId"))throw Error("missing project id!");if(!l.has("studentId"))throw Error("missing student id!");if(!l.has("classId"))throw Error("missing class id!");const j=l.get("projectId"),C=l.get("classId"),k=l.get("studentId");l.has("groupId")&&G(l.get("groupId")),S(j),B(C),s(l.get("studentId"));const E=await J();if(!E)throw Error("missing user id!");c(E);const y=await T(k);v(y),y.id==E&&p(!0);const R=await X(C,j);W(R.evalBackgroundColor),Y(R.cardColor),U(R.background);const x=await q(C,j,k);if(d(x),x.length==0)return;console.log(x);const N=await Z(C,j);g(N);const Q=[];for(let w=0;w<N.length;w++){const H=N[w],I=[];x.forEach(u=>{I.push({id:u.submission[w].id,value:u.submission[w].value,comment:u.submission[w].comment,student:u.submitterId})});for(let u=0;u<I.length;u++){const L=I[u],O=await T(L.student);L.student=O.name}Q.push({question:H,submissions:I})}M(Q),console.log(Q)}i()},[]),e.jsx(e.Fragment,{children:f!=null?e.jsxs("div",{className:"Center "+b,style:{backgroundColor:K},children:[e.jsx("h2",{className:"Title",children:m?"Your Profile":f.name+"'s Profile"}),e.jsx("img",{src:ee,alt:"back",className:"BackArrow",onClick:()=>{const i=new URL(window.location.href);i.searchParams.delete("studentId"),D!=""?window.location.href=i.origin+"/Group/"+i.search:window.location.href=i.origin+"/Project/"+i.search}}),e.jsx("div",{className:"Results",children:a.length>0?h.map(i=>e.jsx(re,{question:i.question,submissions:i.submissions,cardColor:V,isCurrentStudent:m})):e.jsx("h3",{children:"No Evaluations Yet!"})})]}):null})}async function ce(){await J()||(window.location.href=window.location.origin+"/Login/")}(async()=>await ce())();_.createRoot(document.getElementById("root")).render(e.jsx($.StrictMode,{children:e.jsx(oe,{})}));
