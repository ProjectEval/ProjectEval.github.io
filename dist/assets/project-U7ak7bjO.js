import{j as e,r as t,g as H,o as he,p as O,q as Ae,a as pe,t as ge,u as Ce,v as xe,w as fe,x as we,y as Ie,z as Se,A as Ne,c as ke,R as ye}from"./auth-Hj7L4AiZ.js";import{S as Ee}from"./student_tile-W2t9V_Er.js";import{E as Re,C as Be}from"./close_warning_dialog--Lp5YRDh.js";import{S as Pe}from"./search_bar-5AWvrt0V.js";import{B as be}from"./back_arrow-IdcwQJqZ.js";import{C as V}from"./close-CDqjbHS0.js";import{P as Ge}from"./plus-Ip2amvQB.js";import{I as ve}from"./info_dialog-9blqAQE1.js";import{C as Te,a as Fe}from"./choose_colors_dialog-n4Wk4ys0.js";import{T as Le}from"./trash-arEgRoH7.js";const Ue="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAxCAYAAACoJ+s+AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAKKADAAQAAAABAAAAMQAAAAAXFpNfAAAD1UlEQVRYCe2ZSWjVUBSGfbWi1VqxooILBUGcLc4julLBhSCCoKILKxZFxGEluBC6EFxbK9aiIoJUFFw4ICIoDrgpxWrFsdSNAy3a1qGtw/P7Q1LiM8m7Sdr3svDA33vuOeee/Dk3Nzf3NTUghKTT6XGE7wErQXGIoZ2pVGqe4skxhaaZfrfJ+EKTIMWQeBLNeTBC/RiyibFl5NsGybZseQqyBbj8R9HjklO6NFAVz0JypAxBYkSQRDNJMi0oUQSfZkQkA2/aiCCJyiIQ8BuiCjoyGeUMJEscQ2ZrSrA0c2Af9jUzpyE53CunKcEuBn+w0Urb45Ushm0GY09BclhmjlSmwbRPMj07c8FasBoE3az7NXOY2I3AS+oxlrO6vznOoKROjGdLknZwG+wlYD145RkYzjiH8JPcfJEz7K/3II5ROGaDMaA3yAl2tRch1uH00ZsYu4H+cbDIsfu07kXiFTIf4wnyVZC3yyJIR7vCIaDpGgiyyS0COhin91k5qBRhJUWvBktAHNFNVilfAX9EshasAybkCOsVxeumLpBntO4YfSd4ANzinqkWtyNAX4Zve4rEmprKgEAv1yrItDB2Os7LdsAb2i3YW7EPQdd0L7V9albgey8FfwnNIOlZpEeLZE2WIFP3RAL10i11VfK+a/B+fNaixN8B2gzQqQo+JEnYF7FXBR0uL1BUyc/kHoyuZ9Kp5HP0u6ATmEi3CDYRGfbZCyKoCz8DW1Upm6SmW89UWPmikoclZ3KRqQRZeywk9d23C9wzGZgZYz0TmcY+6msB1VLB4jgk+5Og7nMW0B47NCrJ/iYoktqZaiBZFIVkLgiKpM4j1h4blmSuCIrkAlCtVW2T3E3/qRxBkkuC4rEYHINkISS/ox8AP4GvxCWY7cvE68LLMe6TA5LNNFek+4l7E/eL8bJrL5Vo/9VeHHYnGm9XUdW7CvQ96SlRCS4kWyMV0NfLQc/M5saGoNCoU1xBBfSOiy3c5FeSCJ4StYKa4jpIPqZ9C354Zg823oDcHTtEBP85MMkXlaDG6sCl83LUM7MWiEPQdyVHnWJy50b+E4xb5/8VjFnB7qRXsC3pBBuSTFAfInVJJljFTtMYZyeJ+fx7Dv+N9QmogdxNRSSF4A64aLv7aH88iJsliSAIqZcOocw2yc+gxTWfBI2OCyKow0s+xOi6IvguH+xMryuCj/JAUCu23uS6IngORPlkN8nvF3OJlfvJz+m2FxD4GoNOZn39zxn3ddy6ZuyI2xCk61xhCQegCSibgX5HGQv062ivHz2qaHdoB/rl9Tq4RlF+0RrJH/T5KYIhbDcJAAAAAElFTkSuQmCC";function De({name:u,projectId:C,classId:x,groupId:j,deleteGroup:f}){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"GroupTile",onClick:()=>{const a=new URL(window.location.origin);a.searchParams.set("classId",x),a.searchParams.set("projectId",C),a.searchParams.set("groupId",j),window.location.href=a.origin+"/Group/"+a.search},children:[e.jsx("h2",{className:"GroupName",children:u}),e.jsx("img",{src:Le,alt:"delete group",className:"GroupTrashIcon",onClick:a=>{a.stopPropagation(),f(j)}})]})})}function Me(){const[u,C]=t.useState([]),[x,j]=t.useState([]),[f,a]=t.useState([]),[E,q]=t.useState(""),[R,z]=t.useState(!1),[r,X]=t.useState(""),[n,$]=t.useState(""),w=t.useRef(null),m=t.useRef(null),[B,P]=t.useState(""),[_,ee]=t.useState(""),I=t.useRef(null),[se,b]=t.useState(""),[te,G]=t.useState(""),[S,v]=t.useState(""),[N,T]=t.useState(""),[F,L]=t.useState(""),[U,D]=t.useState(""),M=t.useRef(null),Z=t.useRef(null),Q=t.useRef(null),[oe,ae]=t.useState(!1),h=t.useRef(null),[re,ne]=t.useState(),[J,ce]=t.useState(""),[k,ie]=t.useState([]),[le,Y]=t.useState(!1);t.useEffect(()=>{A(),console.log("Fetched Students")},[]);async function A(){var W;const s=await H();ee(s);const p=window.location.search,c=new URLSearchParams(p);if(!c.has("classId"))throw Error("missing class id!");if(!c.has("projectId"))throw Error("missing project id!");const o=c.get("classId");$(o);const g=await he(o),K=await O(g.students);j(K);const l=c.get("projectId"),i=await Ae(o,l);q(i.name),P(i.name),v(i.background),D(i.cardColor),T(i.backgroundColor),L(i.evalBackgroundColor),X(l);const y=await pe(s);if(z(y),y){const d=await ge(o,l);a(d)}else{const d=await Ce(o,l,s);if(d!=null){ae(!0);const me=await O(d.students);C(me)}}y&&(await xe(o,l)).length==0&&((W=w.current)==null||W.showModal())}const de=async()=>{var s;await we(n,r,B,S,N,U,F),(s=m.current)==null||s.close(),await A()},ue=async()=>{var p,c;const s=k.map(o=>o.id);for(let o=0;o<k.length;o++){const g=k[o];if(await Ie(n,r,g.id)){b(`${g.name} is already in another group`),G("Unable to create group"),(p=I.current)==null||p.showModal();return}}await Se(n,r,J,s),await A(),(c=h.current)==null||c.close()},je=async s=>{await Ne(),await A()};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"Center "+S,style:{backgroundColor:N},children:[e.jsx("h2",{className:"Title",children:E}),R&&e.jsxs("div",{className:"TeacherIcons",children:[e.jsx("img",{src:Ue,alt:"copy project",className:"CopyIcon",onClick:async()=>{var s;Y(!0),await fe(n,r),b("Project copied successfully!"),G("Project Copied"),(s=I.current)==null||s.showModal()}}),e.jsx("img",{src:Re,alt:"edit project",className:"EditIcon",onClick:()=>{var s;(s=m.current)==null||s.showModal()}}),e.jsx("img",{src:Ge,alt:"add group",className:"PlusIcon",onClick:()=>{var s;(s=h.current)==null||s.showModal()}})]}),e.jsx("img",{src:be,alt:"back",className:"BackArrow",onClick:()=>{const s=new URL(window.location.href);s.searchParams.delete("projectId"),window.location.href=s.origin+"/Projects/"+s.search}}),R?e.jsxs(e.Fragment,{children:[e.jsx("h3",{children:"Groups:"}),e.jsx("div",{className:"Students",children:f.map(s=>e.jsx(De,{name:s.name,groupId:s.id,projectId:r,classId:n,deleteGroup:je},s.id))})]}):oe?e.jsxs(e.Fragment,{children:[e.jsx("h3",{children:"Students:"}),e.jsx("div",{className:"Students",children:u.map(s=>e.jsx(Ee,{name:s.name,id:s.id,projectId:r,classId:n,projectName:E},s.id))})]}):e.jsx("h2",{children:"Not in a group!"}),e.jsx("br",{})]}),e.jsxs("dialog",{ref:w,className:"warningDialog",children:[e.jsx("label",{children:"This project has no evaluation template! You need to create one before you can evaluate students."}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{onClick:()=>{const s=new URL(window.location.origin);s.searchParams.set("projectId",r),s.searchParams.set("classId",n),window.location.href=s.origin+"/Project/Editor/"+s.search},children:"Create Eval Template"}),e.jsx("span",{children:" "}),e.jsx("button",{onClick:()=>{var s;(s=w.current)==null||s.close()},children:"Close"})]}),e.jsxs("dialog",{ref:m,className:"EditProjDialog",children:[e.jsx("h2",{children:"Edit Project"}),e.jsx("img",{src:V,alt:"close",className:"CloseIcon",onClick:()=>{var s;ne(m),(s=Q.current)==null||s.showModal()}}),e.jsxs("form",{children:[e.jsxs("div",{className:"EditSides",children:[e.jsxs("div",{className:"EditLeft",children:[e.jsx("label",{htmlFor:"projectName",children:"Project Name:"}),e.jsx("span",{children:" "}),e.jsx("input",{type:"text",name:"projectName",id:"projectName",value:B,onChange:s=>{P(s.target.value)}}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{type:"button",onClick:()=>{const s=new URL(window.location.origin);s.searchParams.set("projectId",r),s.searchParams.set("classId",n),window.location.href=s.origin+"/Project/Editor/"+s.search},children:"Edit Project Template"})]}),e.jsxs("div",{className:"EditRight",children:[e.jsx("button",{type:"button",onClick:()=>{var s;(s=Z.current)==null||s.showModal()},children:"Edit Background"}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{type:"button",onClick:()=>{var s;(s=M.current)==null||s.showModal()},children:"Edit Colors"})]})]}),e.jsx("button",{type:"button",onClick:de,children:"Save Project"})]})]}),e.jsx(ve,{info:se,Title:te,infoModalRef:I,onClose:()=>{if(!le)return;Y(!1);const s=new URL(window.location.href);s.searchParams.delete("projectId"),window.location.href=s.origin+"/Projects/"+s.search}}),e.jsxs("dialog",{ref:h,children:[e.jsx("h2",{children:"Create Group"}),e.jsx("img",{src:V,alt:"close",className:"CloseIcon",onClick:()=>{var s;(s=h.current)==null||s.close()}}),e.jsxs("form",{children:[e.jsx("label",{htmlFor:"groupName",children:"Group Name:"}),e.jsx("span",{children:" "}),e.jsx("input",{type:"text",name:"groupName",id:"groupName",value:J,onChange:s=>{ce(s.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",className:"InviteTitle",children:"Students: "}),e.jsx(Pe,{name:"Student",content:x,currentUserId:_,updateContent:s=>{ie(s)}}),e.jsx("br",{}),e.jsx("button",{type:"button",onClick:ue,children:"Create Group"})]})]}),e.jsx(Be,{closeWarningRef:Q,connectedRef:re}),e.jsx(Te,{setBackground:v,backgroundRef:Z,currentBackground:S}),e.jsx(Fe,{setBgColor:T,colorRef:M,currentBgColor:N,isProject:!0,currentTileColor:U,setTileColor:D,currentEvalBgColor:F,setEvalBgColor:L})]})}async function Ze(){await H()||(window.location.href=window.location.origin+"/Login/")}(async()=>await Ze())();ke.createRoot(document.getElementById("root")).render(e.jsx(ye.StrictMode,{children:e.jsx(Me,{})}));
