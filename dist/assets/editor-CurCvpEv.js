import{j as e,r as A,o as E,z as R,c as f,R as M,g as T}from"./auth-OIc4apUQ.js";import{T as u,C as N}from"./close-KeMSzLwU.js";const x="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAKKADAAQAAAABAAAAKAAAAAB65masAAAE80lEQVRYCcWYW4iVVRTHzxmz8VYEaakp4UmdLpZ5yXDUSB8USSoL0akIAu2lJELwmi9KggoKPigqoj1oRXl5kAqyGYlkIC8YDNZoji9ZXiJomm4Wjb//8axxfd/Z58z3OTOnBf+z1157Xf5n7/3tb5+TzdyitLe3303ok2AMGAEGgf7gP9AGLoPz4BtwPJvN/k6bWrJpIiBVjf+zYC4YD5LG/4vvl+AA+AKy+hKJJFEBiPUi2yvgdTAwUebSThcY2gLJT0q73BzplCDkHsN9HRh1M6xD00ycBefAT0DLWAUGgOGgBtwPQtKIcRVEL4YGzVaWIORexXEZuM0CCq2SHwQNFGiNjUW65BiMYSZ4ETwYGcxkFLuMHPUxe/kuSbNgJWiOYQ/9R8pHlx4l9ilwOJbzW/p1paMCIwS8E0tymr4ejC4LeXqBN8EZ4CcgGUmCFsYCj9If2WVmsQTknAJOuVqayRkxt2gXhwnAf7MG+kOiXt3XI/ejwJM8Tn9osAID1eAIsGk/iZ4LOnejkRqaSc2e1d3t0+tIMFmEoqPBZDVPV4t1eqqlxjFyb3X5ayE72/p5ghjuxPCaGWl1fCQ6SC2GHNOAlkirUOrsM/d4uw3D9864mBx5bjaDCxjU4SrR4bs+r6X7eBl3fVGtwnNpQpkMvQo3upgH0KerbwRfcINHCNDrKK30dQF9nJ5IpeZRHPVWMtHBnqliKkfTjjAr7X6nV1r92BXUod5XM1jrjH+if+X6lVY/dwV7o08UwbHOeKqwH5ypciq1f6TaD67iWBHMOYPfA85cUbXZVcvplnKvM3j2znxDZU9MQpsFbi8ajH7RqfjeEfD5A9uHzFS589VzGCyCuqab6KoeFAr2Y2AH8E9r0BdjTQGh8SkY54QGCjbPob+WWDDRGVhKdKvWxu2qVHeSwHOo0gyK8V2FIDusi3KwLL8xi4sZ0GsoRFTLrx9SEp2j3+W16IeWeF/UVNTzHNpE8CowgvcVuTsDJOvpCkUC+fcwGsF6fDcUOSUzDHVuV7W8Lc4w0un/lzrKFW4RwSZn0H3Q70k31PMqtQdSJecqNYlMozPoaHjC9SutznAF9bB8LYKaQZ3gJv7iYLZKtb52I/u4tYqPdqofcgzmMNW3cs3/2+XwujOXVqk5ntFxzkM/azvOwL3ofxUG9WS/XdDTNLoFXQO/gE/TBEIui/9SF6MVjebAaQWw3wVqdeKnEmJ6A22bVEJMHfC151sCMc8LDjogPwP6l0ryM5jLFriS7/XQB3UfJvUHwN4weibmUVcPSccSZzC00V8NtCcleuR3kUDX+B4RcuvnwU5g5LR3Vxg5FY0sBwMN2HZpoCCjafeS6B4zdFdLTuXeBzQRJmvgUP7KR6B+BmwGfk8co19rWbrakut5oL9TfI23Qnk79qAfJFBPst6lz3g7uo6jzXzLSzF7oi559RpbDqbGAraTc1PMlu8GCWqEZBpbAhYC7/cP/cPgADhB4vxmRg8KeXTzmQbmgekgnutdcryPPSjeOehAgacZWAtC+7AV+0mgH90Xgf2BqVfmMFADHgehS+557Esh10RbUjolqEhI6tb9BngJhIphTiy/4rkD7IGcfrCXlUQELQNEdd+rA/qvUDOURppx1tvmI4jp4ppIUhG0jBBV3ENgMhgDckDHhWZa56iWWg+S7pqngV78F2hTy3W89FFrByfR/QAAAABJRU5ErkJggg==";function b({handleRemoveElmt:l,element:s,handleUpdateElmt:i}){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"FreeResponseElmt EvalElmt",children:[e.jsxs("div",{className:"ElmtTopBar",children:[e.jsx("h2",{className:"ElmtTitle",children:"Free Response Question"}),e.jsx("img",{src:u,alt:"Remove elmt",className:"RemoveElmt",onClick:()=>{l()}})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"ResQuestion",children:"Question: "}),e.jsx("input",{type:"text",className:"ResQuestion",placeholder:"Question",defaultValue:s.Question,onChange:t=>{i({Question:t.target.value})}})]}),e.jsxs("div",{className:"ElmtHasComment",children:[e.jsx("label",{htmlFor:"",children:"Has Comment: "}),e.jsx("input",{type:"checkbox",checked:s.hasComment,onChange:t=>{i({hasComment:t.target.checked})}})]})]})})}function g({handleChangeChoice:l,index:s,value:i,removeChoice:t}){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"Choice",children:[e.jsxs("label",{htmlFor:"Choice",className:"ChoiceText",children:["Choice #",s+1]}),e.jsx("input",{type:"text",name:"Choice",value:i,onChange:h=>{l(h.target.value)}}),e.jsx("img",{src:u,alt:"delete",className:"RemoveChoice",onClick:t})]})})}function Q({handleRemoveElmt:l,element:s,handleUpdateElmt:i}){const t=n=>a=>{const r=[...s.Answer.Choices];r[n]=a,i({Answer:{...s.Answer,Choices:r}})},h=n=>()=>{const a=[...s.Answer.Choices];a.splice(n,1),i({Answer:{...s.Answer,Choices:a}})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"MultiChoiceElmt EvalElmt",children:[e.jsxs("div",{className:"ElmtTopBar",children:[e.jsx("h2",{className:"ElmtTitle",children:"Multiple Choice Question"}),e.jsx("img",{src:u,alt:"Remove elmt",className:"RemoveElmt",onClick:()=>{l()}})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Question: "}),e.jsx("input",{type:"text",className:"ResQuestion",placeholder:"Question",defaultValue:s.Question,onChange:n=>{i({Question:n.target.value})}})]}),e.jsx("br",{}),e.jsxs("div",{className:"ElmtChoicesTitle",children:[e.jsx("label",{children:"Choices:"}),e.jsx("img",{src:x,alt:"Add Choice",className:"AddChoice",onClick:()=>{i({Answer:{...s.Answer,Choices:[...s.Answer.Choices,""]}})}})]}),e.jsx("div",{className:"ElmtChoices",children:s.Answer.Choices.map((n,a)=>e.jsx(g,{index:a,value:n,handleChangeChoice:t(a),removeChoice:h(a)},a))}),e.jsxs("div",{className:"ElmtHasComment",children:[e.jsx("label",{htmlFor:"",children:"Has Comment: "}),e.jsx("input",{type:"checkbox",checked:s.hasComment,onChange:n=>{i({hasComment:n.target.checked})}})]})]})})}function k({handleRemoveElmt:l,element:s,handleUpdateElmt:i}){const t=n=>a=>{const r=[...s.Answer.Choices];r[n]=a,i({Answer:{...s.Answer,Choices:r}})},h=n=>()=>{const a=[...s.Answer.Choices];a.splice(n,1),i({Answer:{...s.Answer,Choices:a}})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"MultiChoiceElmt EvalElmt",children:[e.jsxs("div",{className:"ElmtTopBar",children:[e.jsx("h2",{className:"ElmtTitle",children:"Multiple Select Question"}),e.jsx("img",{src:u,alt:"Remove elmt",className:"RemoveElmt",onClick:()=>{l()}})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Question: "}),e.jsx("input",{type:"text",className:"ResQuestion",placeholder:"Question",defaultValue:s.Question,onChange:n=>{i({Question:n.target.value})}})]}),e.jsx("br",{}),e.jsxs("div",{className:"ElmtChoicesTitle",children:[e.jsx("label",{children:"Choices:"}),e.jsx("img",{src:x,alt:"Add Choice",className:"AddChoice",onClick:()=>{i({Answer:{...s.Answer,Choices:[...s.Answer.Choices,""]}})}})]}),e.jsx("div",{className:"ElmtChoices",children:s.Answer.Choices.map((n,a)=>e.jsx(g,{index:a,value:n,handleChangeChoice:t(a),removeChoice:h(a)},a))}),e.jsxs("div",{className:"ElmtHasComment",children:[e.jsx("label",{htmlFor:"",children:"Has Comment: "}),e.jsx("input",{type:"checkbox",checked:s.hasComment,onChange:n=>{i({hasComment:n.target.checked})}})]})]})})}function F({handleRemoveElmt:l,element:s,handleUpdateElmt:i}){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"RangeElmt EvalElmt",children:[e.jsxs("div",{className:"ElmtTopBar",children:[e.jsx("h2",{className:"ElmtTitle",children:"Range Question"}),e.jsx("img",{src:u,alt:"Remove elmt",className:"RemoveElmt",onClick:()=>{l()}})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"ResQuestion",children:"Question: "}),e.jsx("input",{type:"text",className:"ResQuestion",placeholder:"Question",defaultValue:s.Question,onChange:t=>{i({Question:t.target.value})}})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"min",children:"Min: "}),e.jsx("input",{type:"number",className:"min",placeholder:"Min",defaultValue:s.Answer.Min,onChange:t=>{i({Answer:{...s.Answer,Min:parseInt(t.target.value)}})}}),e.jsx("span",{children:" "}),e.jsx("label",{htmlFor:"",children:"Min Title: "}),e.jsx("input",{type:"text",className:"minTitle",placeholder:"Min Title",defaultValue:s.Answer.MinTitle,onChange:t=>{i({Answer:{...s.Answer,MinTitle:t.target.value}})}})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"max",children:"Max: "}),e.jsx("input",{type:"number",className:"max",placeholder:"Max",defaultValue:s.Answer.Max,onChange:t=>{i({Answer:{...s.Answer,Max:parseInt(t.target.value)}})}}),e.jsx("span",{children:" "}),e.jsx("label",{htmlFor:"",children:"Max Title: "}),e.jsx("input",{type:"text",className:"maxTitle",placeholder:"Max Title",defaultValue:s.Answer.MaxTitle,onChange:t=>{i({Answer:{...s.Answer,MaxTitle:t.target.value}})}})]}),e.jsxs("div",{className:"ElmtHasComment",children:[e.jsx("label",{htmlFor:"",children:"Has Comment: "}),e.jsx("input",{type:"checkbox",checked:s.hasComment,onChange:t=>{i({hasComment:t.target.checked})}})]})]})})}function B(){const[l,s]=A.useState([]),i=A.useRef(null),[t,h]=A.useState(""),[n,a]=A.useState("");A.useEffect(()=>{(async()=>{const c=window.location.search,o=new URLSearchParams(c);if(!o.has("projectId"))throw Error("missing project id!");if(!o.has("classId"))throw Error("missing class id!");const m=o.get("projectId"),d=o.get("classId"),v=await E(d,m);s(v.eval_template),a(m),h(d)})()},[]);const r=c=>()=>{const o=l.filter((m,d)=>m.id!=c);s(o)};function j(){let c=new Date().getTime();return c=Math.floor(c*Math.random()*100),c}function p(c,o,m){const d=[...c];return d[o]=m,d}const C=c=>o=>{s(p(l,c,{...l[c],...o}))},w=async()=>{await R(t,n,l);const c=new URL(window.location.href);window.location.href=c.origin+"/Project/"+c.search};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"Center",children:[e.jsx("h2",{className:"Title",children:"Evaluation Editor"}),l.map((c,o)=>c.Answer.Type=="FreeResponse"?e.jsx(b,{handleRemoveElmt:r(c.id),element:c,handleUpdateElmt:C(o)},c.id):c.Answer.Type=="MultiChoice"?e.jsx(Q,{handleRemoveElmt:r(c.id),element:c,handleUpdateElmt:C(o)},c.id):c.Answer.Type=="MultiSelect"?e.jsx(k,{handleRemoveElmt:r(c.id),element:c,handleUpdateElmt:C(o)},c.id):c.Answer.Type=="Range"?e.jsx(F,{handleRemoveElmt:r(c.id),element:c,handleUpdateElmt:C(o)},c.id):null),e.jsx("br",{}),e.jsx("img",{src:x,alt:"Add element",id:"AddElement",onClick:()=>{i.current.showModal()}}),e.jsx("br",{}),e.jsx("button",{onClick:w,children:"Save Template"}),e.jsx("br",{})]}),e.jsxs("dialog",{ref:i,children:[e.jsx("h2",{children:"Element to Add"}),e.jsx("img",{src:N,alt:"close",className:"CloseIcon",onClick:()=>{var c;(c=i.current)==null||c.close()}}),e.jsx("button",{onClick:()=>{s([...l,{Question:"",Answer:{Type:"FreeResponse"},hasComment:!1,id:`frq-${j()}`}]),i.current.close()},children:"Free Response"}),e.jsx("span",{children:" "}),e.jsx("button",{onClick:()=>{s([...l,{Question:"",Answer:{Type:"MultiChoice",Choices:[]},hasComment:!1,id:`mcq-${j()}`}]),i.current.close()},children:"Multiple Choice"}),e.jsx("span",{children:" "}),e.jsx("button",{onClick:()=>{s([...l,{Question:"",Answer:{Type:"MultiSelect",Choices:[]},hasComment:!1,id:`msq-${j()}`}]),i.current.close()},children:"Multiple Select"}),e.jsx("span",{children:" "}),e.jsx("button",{onClick:()=>{s([...l,{Question:"",Answer:{Type:"Range",Min:0,Max:10,MinTitle:"",MaxTitle:""},hasComment:!1,id:`rq-${j()}`}]),i.current.close()},children:"Range"})]})]})}async function y(){await T()||(window.location.href=window.location.origin+"/Login/")}(async()=>await y())();f.createRoot(document.getElementById("root")).render(e.jsx(M.StrictMode,{children:e.jsx(B,{})}));
