import{j as e,r as s,g as ie,o as Pe,p as ae,q as ve,a as Te,t as De,u as Fe,v as Le,w as Je,x as Me,y as Ue,z as He,A as ne,B as Ye,C as Ke,D as We,c as Qe,R as Ze}from"./auth-l123uYc1.js";import{S as Oe}from"./student_tile-ucPgqKjM.js";import{E as Ve,C as ze}from"./close_warning_dialog-BpEjKHTw.js";import{S as re}from"./search_bar-7c5lsXz1.js";import{B as Xe}from"./back_arrow-IdcwQJqZ.js";import{C as M}from"./close-CDqjbHS0.js";import{P as ce}from"./plus-Ip2amvQB.js";import{I as qe}from"./info_dialog-gg6UHO-1.js";import{C as $e,a as _e}from"./choose_colors_dialog-lsoG9GKc.js";import{T as et}from"./trash-arEgRoH7.js";const tt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAxCAYAAACoJ+s+AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAKKADAAQAAAABAAAAMQAAAAAXFpNfAAAD1UlEQVRYCe2ZSWjVUBSGfbWi1VqxooILBUGcLc4julLBhSCCoKILKxZFxGEluBC6EFxbK9aiIoJUFFw4ICIoDrgpxWrFsdSNAy3a1qGtw/P7Q1LiM8m7Sdr3svDA33vuOeee/Dk3Nzf3NTUghKTT6XGE7wErQXGIoZ2pVGqe4skxhaaZfrfJ+EKTIMWQeBLNeTBC/RiyibFl5NsGybZseQqyBbj8R9HjklO6NFAVz0JypAxBYkSQRDNJMi0oUQSfZkQkA2/aiCCJyiIQ8BuiCjoyGeUMJEscQ2ZrSrA0c2Af9jUzpyE53CunKcEuBn+w0Urb45Ushm0GY09BclhmjlSmwbRPMj07c8FasBoE3az7NXOY2I3AS+oxlrO6vznOoKROjGdLknZwG+wlYD145RkYzjiH8JPcfJEz7K/3II5ROGaDMaA3yAl2tRch1uH00ZsYu4H+cbDIsfu07kXiFTIf4wnyVZC3yyJIR7vCIaDpGgiyyS0COhin91k5qBRhJUWvBktAHNFNVilfAX9EshasAybkCOsVxeumLpBntO4YfSd4ANzinqkWtyNAX4Zve4rEmprKgEAv1yrItDB2Os7LdsAb2i3YW7EPQdd0L7V9albgey8FfwnNIOlZpEeLZE2WIFP3RAL10i11VfK+a/B+fNaixN8B2gzQqQo+JEnYF7FXBR0uL1BUyc/kHoyuZ9Kp5HP0u6ATmEi3CDYRGfbZCyKoCz8DW1Upm6SmW89UWPmikoclZ3KRqQRZeywk9d23C9wzGZgZYz0TmcY+6msB1VLB4jgk+5Og7nMW0B47NCrJ/iYoktqZaiBZFIVkLgiKpM4j1h4blmSuCIrkAlCtVW2T3E3/qRxBkkuC4rEYHINkISS/ox8AP4GvxCWY7cvE68LLMe6TA5LNNFek+4l7E/eL8bJrL5Vo/9VeHHYnGm9XUdW7CvQ96SlRCS4kWyMV0NfLQc/M5saGoNCoU1xBBfSOiy3c5FeSCJ4StYKa4jpIPqZ9C354Zg823oDcHTtEBP85MMkXlaDG6sCl83LUM7MWiEPQdyVHnWJy50b+E4xb5/8VjFnB7qRXsC3pBBuSTFAfInVJJljFTtMYZyeJ+fx7Dv+N9QmogdxNRSSF4A64aLv7aH88iJsliSAIqZcOocw2yc+gxTWfBI2OCyKow0s+xOi6IvguH+xMryuCj/JAUCu23uS6IngORPlkN8nvF3OJlfvJz+m2FxD4GoNOZn39zxn3ddy6ZuyI2xCk61xhCQegCSibgX5HGQv062ivHz2qaHdoB/rl9Tq4RlF+0RrJH/T5KYIhbDcJAAAAAElFTkSuQmCC";function st({name:C,projectId:R,classId:f,groupId:I,deleteGroup:S}){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"GroupTile",onClick:()=>{const i=new URL(window.location.origin);i.searchParams.set("classId",f),i.searchParams.set("projectId",R),i.searchParams.set("groupId",I),window.location.href=i.origin+"/Group/"+i.search},children:[e.jsx("h2",{className:"GroupName",children:C}),e.jsx("img",{src:et,alt:"delete group",className:"GroupTrashIcon",onClick:i=>{i.stopPropagation(),S(I)}})]})})}const ot="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAqCAYAAAAnH9IiAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAALaADAAQAAAABAAAAKgAAAAD0iNlAAAADG0lEQVRYCe2ZTahNURTH37nE8zERno+JGTJRwuRl5nMoooRSDF5REhlIvZcYYECiDJTkEUk+egPFRGFgQEbkTRg8n+UrH0+4fv/j7Gt13r23s+/d994zuKv+d6999tpr/c866+6z971RRyLFYnE66nqwCHSBcSCkFHH2DQyB++ByFEWfab0l0gwIL6U5CkITlftK8p6BHog/qWRQ6XoE4VkM3gCdlYwaeP0dvldA/KtPjNEYbwKW8G3618FHEFL0VKeAjWBB4ngq7WpwPulna8j0AHiW4Ei2WbVbEUdP95KJedLXW4EJM82kq0ZviEop6At5zTifYfRMqkiPN5avjN5I9bVxPsHomVSRtqIsNENsnHgF8wmaJu0zt2W2bdLNSn070yEyzfpdANOq+cpjpk9A+C7ED+kGypEve7GcYROvzUtiraHtg/iIJVF7j1aIdnZbk8DfUwT66CvbY8A68AMcBP+FO3H7DrXa8bVc4NENHhtuuy2pPJZHB/uTe5DcAr4kZLdxA9sd8VySFjmIP6LZDD6oj+yAeFxSQWoaZ6twOgeM+NIoWo3yi3k6ng0A7cEle4g1XDdpnCzB2bHYZXM+9oUoj7HN4VqKEtWdaVzdAb1gNghdHlruJoG1wMmpukknJ5GLzmPIltLTEnzW+DxDvOMhysP4DKdCWE/uAnDHwX4IH1aEXJKG8Hy49QOd3iVXwIFY46Pu8nCOfFpITcTevX2HyeCgm8/YYvTTwJ1db6LvT8owNmsJaSIvBCImeQGWx9q/D+0zHOFb6Hsh/MeM57I8XiYEtSrtgvBvS1h6qzKd5mH7PXRUOoO2JKxB7khD9CcEn1uSaT2Xq0eaZLrfJp3OSKP67UzXmNmi7zxl2h4sq/7e4Ou8in2XGbPxzeXKqki/NcMrjd5I1cZ54xtI6/RD4PYBG3j360b0vv8EQor22pOBjk7dxrHie4n+SpjLDP0DMMprZhhjnbaX8UJxh9dMXgtMeIplLxjxjs/koXYjHVp3+hJWuNLxiIzrNK1Hpx2YviidoDSOXq9olRDRIfAAnIOwdG/5CxqR4HbNSg30AAAAAElFTkSuQmCC";function at(){const[C,R]=s.useState([]),[f,I]=s.useState([]),[S,i]=s.useState([]),[G,le]=s.useState(""),[U,de]=s.useState(!1),[a,ue]=s.useState(""),[n,Ae]=s.useState(""),b=s.useRef(null),w=s.useRef(null),[H,y]=s.useState(""),[N,je]=s.useState(""),h=s.useRef(null),[pe,E]=s.useState(""),[me,k]=s.useState(""),[B,Y]=s.useState(""),[P,K]=s.useState(""),[W,Q]=s.useState(""),[Z,O]=s.useState(""),V=s.useRef(null),z=s.useRef(null),X=s.useRef(null),[q,$]=s.useState(!1),p=s.useRef(null),[ge,he]=s.useState(),[v,T]=s.useState(""),[_,xe]=s.useState(""),[l,m]=s.useState([]),[Ce,ee]=s.useState(!1),[fe,Ie]=s.useState(!0),[Se,we]=s.useState([]),[Ne,Ee]=s.useState(""),[ke,te]=s.useState(!1),D=s.useRef(null),[Re,se]=s.useState(!1);s.useEffect(()=>{u(),console.log("Fetched Students")},[]);async function u(){var oe;const t=await ie();je(t);const x=window.location.search,r=new URLSearchParams(x);if(!r.has("classId"))throw Error("missing class id!");if(!r.has("projectId"))throw Error("missing project id!");const o=r.get("classId");Ae(o);const A=await Pe(o),c=await ae(A.students);I(c);const d=r.get("projectId"),j=await ve(o,d);le(j.name),y(j.name),Y(j.background),O(j.cardColor),K(j.backgroundColor),Q(j.evalBackgroundColor),ue(d);const F=await Te(t);de(F);const L=await De(o,d);if(L.sort((g,J)=>g.index-J.index),F)i(L);else{const g=await Fe(o,d,t);if(g!=null){$(!0),xe(g.id);const J=await ae(g.students);R(J)}else we(L)}F&&(await Le(o,d)).length==0&&((oe=b.current)==null||oe.showModal()),Ie(!1)}const Ge=async()=>{var t;await He(n,a,H,B,P,Z,W),(t=w.current)==null||t.close(),await u()},be=async()=>{var r,o,A;const t=l.map(c=>c.id);for(let c=0;c<l.length;c++){const d=l[c];if(await ne(n,a,d.id)){E(`${d.name} is already in another group`),k("Unable to create group"),(r=h.current)==null||r.showModal();return}}if(S.find(c=>c.name==v)!=null){E("A group with that name already exists!"),k("Unable to create group"),(o=h.current)==null||o.showModal();return}await Ye(n,a,v,t),await u(),(A=p.current)==null||A.close()},ye=async t=>{await Ke(n,a,t),await u()},Be=async()=>{var x,r;se(!0);const t=l.map(o=>o.id);for(let o=0;o<l.length;o++){const A=l[o];if(await ne(n,a,A.id)){E(`${A.name} is already in another group`),k("Unable to add students"),(x=h.current)==null||x.showModal();return}}await We(n,a,_,t),await u(),(r=D.current)==null||r.close(),se(!1)};return e.jsxs(e.Fragment,{children:[fe?e.jsx("div",{className:"Loading"}):e.jsxs("div",{className:"Center "+B,style:{backgroundColor:P},children:[e.jsx("h2",{className:"Title",children:G}),U?e.jsxs("div",{className:"TeacherIcons",children:[e.jsx("img",{src:tt,alt:"copy project",className:"CopyIcon",onClick:async()=>{var t;ee(!0),await Je(n,a),E("Project copied successfully!"),k("Project Copied"),(t=h.current)==null||t.showModal()}}),e.jsx("img",{src:Ve,alt:"edit project",className:"EditIcon",onClick:()=>{var t;(t=w.current)==null||t.showModal()}}),e.jsx("img",{src:ce,alt:"add group",className:"PlusIcon",onClick:()=>{var t;(t=p.current)==null||t.showModal()}})]}):q&&e.jsxs("div",{className:"StudentIcons",children:[e.jsx("img",{src:ot,alt:"leave group",className:"LeaveIcon",onClick:async()=>{await Me(n,a,_,N),$(!1),await u()}}),e.jsx("img",{src:ce,alt:"add group",className:"PlusIcon",onClick:()=>{var t;(t=D.current)==null||t.showModal()}})]}),e.jsx("img",{src:Xe,alt:"back",className:"BackArrow",onClick:()=>{const t=new URL(window.location.href);t.searchParams.delete("projectId"),window.location.href=t.origin+"/Projects/"+t.search}}),U?e.jsxs(e.Fragment,{children:[e.jsx("h3",{children:"Groups:"}),e.jsx("div",{className:"Students",children:S.map(t=>e.jsx(st,{name:t.name,groupId:t.id,projectId:a,classId:n,deleteGroup:ye},t.id))})]}):q?e.jsxs(e.Fragment,{children:[e.jsx("h3",{children:"Students:"}),e.jsx("div",{className:"Students",children:C.map(t=>e.jsx(Oe,{name:t.name,id:t.id,projectId:a,classId:n,projectName:G},t.id))})]}):e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("h3",{className:"joinGroupWarning",children:"Please join a group!"}),e.jsx("h2",{children:"Groups: "}),e.jsx("select",{className:"groupsSelect",onChange:t=>{Ee(t.target.value)},children:Se.map(t=>e.jsx("option",{value:t.id,children:t.name}))}),e.jsx("br",{}),ke?e.jsx("div",{className:"LoadingJoin"}):e.jsx("button",{type:"button",onClick:async()=>{te(!0),await Ue(n,a,Ne,N),await u(),te(!1)},children:"Join Group"})]}),e.jsx("br",{})]}),e.jsxs("dialog",{ref:b,className:"warningDialog",children:[e.jsx("label",{children:"This project has no evaluation template! You need to create one before you can evaluate students."}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{onClick:()=>{const t=new URL(window.location.origin);t.searchParams.set("projectId",a),t.searchParams.set("classId",n),window.location.href=t.origin+"/Project/Editor/"+t.search},children:"Create Eval Template"}),e.jsx("span",{children:" "}),e.jsx("button",{onClick:()=>{var t;(t=b.current)==null||t.close()},children:"Close"})]}),e.jsxs("dialog",{ref:w,className:"EditProjDialog",children:[e.jsx("h2",{children:"Edit Project"}),e.jsx("img",{src:M,alt:"close",className:"CloseIcon",onClick:()=>{var t;he(w),(t=X.current)==null||t.showModal()}}),e.jsxs("form",{children:[e.jsxs("div",{className:"EditSides",children:[e.jsxs("div",{className:"EditLeft",children:[e.jsx("label",{htmlFor:"projectName",children:"Project Name:"}),e.jsx("span",{children:" "}),e.jsx("input",{type:"text",name:"projectName",id:"projectName",value:H,onChange:t=>{y(t.target.value)}}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{type:"button",onClick:()=>{const t=new URL(window.location.origin);t.searchParams.set("projectId",a),t.searchParams.set("classId",n),window.location.href=t.origin+"/Project/Editor/"+t.search},children:"Edit Project Template"})]}),e.jsxs("div",{className:"EditRight",children:[e.jsx("button",{type:"button",onClick:()=>{var t;(t=z.current)==null||t.showModal()},children:"Edit Background"}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{type:"button",onClick:()=>{var t;(t=V.current)==null||t.showModal()},children:"Edit Colors"})]})]}),e.jsx("button",{type:"button",onClick:Ge,children:"Save Project"})]})]}),e.jsx(qe,{info:pe,Title:me,infoModalRef:h,onClose:()=>{if(!Ce)return;ee(!1);const t=new URL(window.location.href);t.searchParams.delete("projectId"),window.location.href=t.origin+"/Projects/"+t.search}}),e.jsxs("dialog",{ref:p,onClose:()=>{var t;T(""),m([]),(t=p.current)==null||t.close()},children:[e.jsx("h2",{children:"Create Group"}),e.jsx("img",{src:M,alt:"close",className:"CloseIcon",onClick:()=>{var t;T(""),m([]),(t=p.current)==null||t.close()}}),e.jsxs("form",{children:[e.jsx("label",{htmlFor:"groupName",children:"Group Name:"}),e.jsx("span",{children:" "}),e.jsx("input",{type:"text",name:"groupName",id:"groupName",value:v,onChange:t=>{T(t.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",className:"InviteTitle",children:"Students: "}),e.jsx(re,{name:"Student",content:f,currentUserId:N,defaultAddedContent:l,updateContent:t=>{m(t)}}),e.jsx("br",{}),e.jsx("button",{type:"button",onClick:be,children:"Create Group"})]})]}),e.jsxs("dialog",{ref:D,onClose:()=>{m([])},children:[e.jsx("h2",{children:"Add Student to Group"}),e.jsx("img",{src:M,alt:"close",className:"CloseIcon",onClick:()=>{var t;m([]),(t=p.current)==null||t.close()}}),e.jsxs("form",{children:[e.jsx("label",{htmlFor:"",className:"InviteTitle",children:"Group Students: "}),e.jsx(re,{name:"Student",content:f,currentUserId:N,defaultAddedContent:l,updateContent:t=>{m(t)}}),e.jsx("br",{}),Re?e.jsx("div",{className:"LoadingJoin"}):e.jsx("button",{type:"button",onClick:Be,children:"Add Students"})]})]}),e.jsx(ze,{closeWarningRef:X,connectedRef:ge,onYes:()=>{y(G)}}),e.jsx($e,{setBackground:Y,backgroundRef:z,currentBackground:B}),e.jsx(_e,{setBgColor:K,colorRef:V,currentBgColor:P,isProject:!0,currentTileColor:Z,setTileColor:O,currentEvalBgColor:W,setEvalBgColor:Q})]})}async function nt(){await ie()||(window.location.href=window.location.origin+"/Login/")}(async()=>await nt())();Qe.createRoot(document.getElementById("root")).render(e.jsx(Ze.StrictMode,{children:e.jsx(at,{})}));
