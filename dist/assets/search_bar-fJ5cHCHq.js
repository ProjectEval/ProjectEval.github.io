import{r as n,j as s,a as g,F as w,D as L}from"./auth-rRsfrA7Z.js";import{T as E}from"./trash-arEgRoH7.js";function T({name:h,content:l,updateContent:f,defaultAddedContent:o,currentUserId:i}){const[r,d]=n.useState(""),[S,j]=n.useState([]),[v,m]=n.useState(!1),[p,x]=n.useState(!1),[c,u]=n.useState([]),[N,C]=n.useState("");return n.useEffect(()=>{(async()=>{if(i=="")return;if(await g(i)){const t=await w(i);C(t.name)}else{const t=await L(i);C(t.name)}})()},[i]),n.useEffect(()=>{o!=null&&u(o)},[o]),n.useEffect(()=>{const e=c.map(t=>t.name);let a=l.filter(t=>t.name.toLowerCase().includes(r.toLowerCase())&&!e.includes(t.name)&&t.name.toLowerCase()!=N.toLowerCase());a.length==1&&a[0].name.toLowerCase()==r.toLowerCase()&&(a=[]),j(a)},[r,l,c]),s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"addedContents",children:c.map(e=>s.jsxs("div",{className:"addedContent",children:[s.jsx("span",{children:e.name}),s.jsx("img",{src:E,alt:`remove ${h}`,className:"TrashIcon",onClick:()=>{u(c.filter(a=>a.id!=e.id)),f(c.filter(a=>a.id!=e.id))}})]},e.id))}),s.jsxs("div",{className:"AddContentQ",children:[s.jsxs("div",{className:"ContentsSearchBar",onMouseEnter:()=>{x(!0)},onMouseLeave:()=>{x(!1)},children:[s.jsx("input",{type:"text",value:r,onBlur:()=>{p||m(!1)},onSelect:()=>{m(!0)},onChange:e=>{d(e.target.value)}}),v&&S.length>0?s.jsx("div",{className:"SearchResults",children:S.map(e=>s.jsx("div",{className:"SearchResult",onClick:()=>{d(e.name)},children:s.jsxs("span",{children:[" ",e.name]})},e.id))}):null]}),s.jsxs("button",{className:"addContentBtn",type:"button",onClick:()=>{r!=""&&(u([...c,l.filter(e=>e.name==r)[0]]),f([...c,l.filter(e=>e.name==r)[0]]),d(""),m(!1))},children:["Add ",h]})]})]})}export{T as S};
