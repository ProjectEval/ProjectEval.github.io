import{j as e,r as t,g as W,o as he,L as je,a as me,M as ge,N as Ce,h as pe,f as xe,O as fe,P as we,Q as Se,S as ke,T as Ne,c as Pe,R as Ee}from"./auth-l123uYc1.js";import{T as Re}from"./trash-arEgRoH7.js";import{P as Ie}from"./plus-Ip2amvQB.js";import{S as X}from"./search_bar-7c5lsXz1.js";import{B as Te}from"./back_arrow-IdcwQJqZ.js";import{E as be,C as Be}from"./close_warning_dialog-BpEjKHTw.js";import{C as O}from"./close-CDqjbHS0.js";import{I as Me}from"./info_dialog-gg6UHO-1.js";import{C as ve,a as ye}from"./choose_colors_dialog-lsoG9GKc.js";function He({name:u,id:x,classId:i,isTeahcer:f,deleteProject:A}){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"ProjectTile",onClick:()=>{const r=new URL(window.location.origin);r.searchParams.set("classId",i),r.searchParams.set("projectId",x),window.location.href=r.origin+"/Project/"+r.search},children:[e.jsx("h2",{className:"ProjectName",children:u}),f&&e.jsx("img",{className:"ProjectTrashIcon",src:Re,alt:"Trash Icon",onClick:r=>{r.stopPropagation(),A()}})]})})}const Ue="data:image/png;base64,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";function Ke(){const[u,x]=t.useState([]),[i,f]=t.useState(""),[A,r]=t.useState(!1),[n,z]=t.useState(""),[b,V]=t.useState([]),[q,_]=t.useState([]);t.useState([]);const[B,$]=t.useState([]),h=t.useRef(null),d=t.useRef(null),[M,j]=t.useState(""),[w,ee]=t.useState(""),[Fe,se]=t.useState(""),[S,v]=t.useState(""),y=t.useRef(null),H=t.useRef(null),[k,N]=t.useState(""),[te,ae]=t.useState([]),P=t.useRef(null),[oe,U]=t.useState(""),[re,K]=t.useState(""),[Q,m]=t.useState([]),[F,g]=t.useState([]),[E,G]=t.useState(""),R=t.useRef(null),[L,I]=t.useState(0),[ce,T]=t.useState(!1);t.useEffect(()=>{C(),console.log("Fetched Projects")},[]);async function C(){const s=await W();ee(s);const a=window.location.search,c=new URLSearchParams(a);if(!c.has("classId"))throw Error("missing class id!");const o=c.get("classId");z(o);const l=await he(o);f(l.name),j(l.name),G(l.background),se(l.background),v(l.backgroundColor);const Y=await je(l.teachers),J=Y.filter(Ae=>Ae.id!=s);V(J),g(J),console.log(Y);const Z=await me(s);r(Z);let p=null;Z?(console.log("IS a teacher"),p=await Ce(o)):p=await ge(s,o),console.log(p),x(p);const de=await pe();ae(de);const ue=await xe();_(ue);const D=await fe(o);$(D),m(D)}const ne=async()=>{var a,c;if(T(!0),await we(n,k)){U("This project name is already taken!"),K("Project Name Taken"),(a=P.current)==null||a.showModal(),T(!1);return}await Se(k,n,L),T(!1),(c=h.current)==null||c.close(),C()},le=async()=>{var c;const s=F.map(o=>o.id);s.push(w);const a=Q.map(o=>o.id);await ke(n,M,a,s,E,S),(c=d.current)==null||c.close(),C()},ie=s=>async()=>{await Ne(n,s),C()};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"Center "+E,style:{backgroundColor:S},children:[e.jsx("h2",{className:"Title",children:i}),e.jsx("h3",{children:"Projects:"}),A?e.jsxs("div",{className:"TeacherIcons",children:[e.jsx("img",{src:Ue,alt:"create join link",className:"LinkIcon",onClick:async()=>{var a;const s=window.location.origin+"/JoinClass/?classId="+n;await navigator.clipboard.writeText(s),U("Copied join link to clipboard!"),K("Copied!"),(a=P.current)==null||a.showModal()}}),e.jsx("img",{src:be,alt:"edit class",className:"EditIcon",onClick:()=>{var s;(s=d.current)==null||s.showModal()}}),e.jsx("img",{src:Ie,alt:"add project",className:"PlusIcon",onClick:()=>{var s;(s=h.current)==null||s.showModal()}})]}):null,e.jsx("img",{src:Te,alt:"back",className:"BackArrow",onClick:()=>{window.location.href="/Dashboard/"}}),e.jsx("div",{className:"Projects",children:u.map(s=>e.jsx(He,{name:s.name,id:s.id,classId:n,isTeahcer:A,deleteProject:ie(s.id)},s.id))}),e.jsx("br",{})]}),e.jsxs("dialog",{ref:h,onClose:()=>{N(""),I(0)},children:[e.jsx("h2",{children:"Create Project"}),e.jsx("img",{src:O,alt:"close",className:"CloseIcon",onClick:()=>{var s;N(""),I(0),(s=h.current)==null||s.close()}}),e.jsxs("form",{children:[e.jsx("label",{htmlFor:"projectName",children:"Project Name:"}),e.jsx("span",{children:" "}),e.jsx("input",{type:"text",name:"projectName",id:"projectName",value:k,onChange:s=>{N(s.target.value)}}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("label",{htmlFor:"projectGroups",children:"Number of Groups:"}),e.jsx("span",{children:" "}),e.jsx("input",{type:"number",name:"projectGroups",id:"projectGroups",value:L,onChange:s=>{I(parseInt(s.target.value))}}),e.jsx("br",{}),e.jsx("br",{}),ce?e.jsx("div",{className:"Loading"}):e.jsx("button",{type:"button",onClick:ne,children:"Create Project"})]})]}),e.jsxs("dialog",{ref:d,className:"EditClassDialog",onClose:s=>{var a;(a=R.current)==null||a.showModal()},children:[e.jsx("h2",{children:"Edit Class"}),e.jsx("img",{src:O,alt:"close",className:"CloseIcon",onClick:()=>{var s;j(i),m(B),g(b),(s=R.current)==null||s.showModal()}}),e.jsxs("form",{children:[e.jsx("label",{htmlFor:"className",children:"Class Name:"}),e.jsx("span",{children:" "}),e.jsx("input",{type:"text",name:"className",id:"className",value:M,onChange:s=>{j(s.target.value)}}),e.jsx("br",{}),e.jsxs("div",{className:"Invitees",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",className:"InviteTitle",children:"Other Teachers: "}),e.jsx(X,{name:"Teacher",content:q,currentUserId:w,defaultAddedContent:F,updateContent:s=>{g(s)}})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",className:"InviteTitle",children:"Students: "}),e.jsx(X,{name:"Student",content:te,currentUserId:w,defaultAddedContent:Q,updateContent:s=>{m(s)}})]})]}),e.jsx("br",{}),e.jsx("button",{type:"button",onClick:()=>{var s;(s=y.current)==null||s.showModal()},children:"Edit Background"}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{type:"button",onClick:()=>{var s;(s=H.current)==null||s.showModal()},children:"Edit Color"}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{type:"button",onClick:le,children:"Save Class"})]})]}),e.jsx(Be,{closeWarningRef:R,connectedRef:d,onYes:()=>{j(i),m(B),g(b)},onNo:()=>{var s;(s=d.current)==null||s.showModal()}}),e.jsx(Me,{info:oe,Title:re,infoModalRef:P}),e.jsx(ve,{setBackground:G,backgroundRef:y,currentBackground:E}),e.jsx(ye,{setBgColor:v,colorRef:H,currentBgColor:S,isProject:!1})]})}async function Qe(){await W()||(window.location.href=window.location.origin+"/Login/")}(async()=>await Qe())();Pe.createRoot(document.getElementById("root")).render(e.jsx(Ee.StrictMode,{children:e.jsx(Ke,{})}));
