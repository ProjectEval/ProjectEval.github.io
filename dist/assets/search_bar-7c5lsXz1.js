import{r as n,j as s,a as N,I as w,G as L}from"./auth-l123uYc1.js";import{T as E}from"./trash-arEgRoH7.js";function k({name:f,content:r,updateContent:S,defaultAddedContent:i,currentUserId:c}){const[o,d]=n.useState(""),[x,j]=n.useState([]),[v,m]=n.useState(!1),[p,C]=n.useState(!1),[l,h]=n.useState([]),[u,g]=n.useState("");return n.useEffect(()=>{(async()=>{if(console.log(c),c=="")return;if(await N(c)){const a=await w(c);console.log("IS Teacher"),console.log(a),g(a.name)}else{const a=await L(c);console.log("IS Student"),g(a.name)}})()},[c]),n.useEffect(()=>{i!=null&&h(i)},[i]),n.useEffect(()=>{const e=l.map(a=>a.name);console.log(u);let t=r.filter(a=>a.name.toLowerCase().includes(o.toLowerCase())&&!e.includes(a.name)&&a.name.toLowerCase()!=u.toLowerCase());t.length==1&&t[0].name.toLowerCase()==o.toLowerCase()&&(t=[]),j(t)},[o,r,l,u]),s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"addedContents",children:l.map(e=>s.jsxs("div",{className:"addedContent",children:[s.jsx("span",{children:e.name}),s.jsx("img",{src:E,alt:`remove ${f}`,className:"TrashIcon",onClick:()=>{h(l.filter(t=>t.id!=e.id)),S(l.filter(t=>t.id!=e.id))}})]},e.id))}),s.jsxs("div",{className:"AddContentQ",children:[s.jsxs("div",{className:"ContentsSearchBar",onMouseEnter:()=>{C(!0)},onMouseLeave:()=>{C(!1)},children:[s.jsx("input",{type:"text",value:o,onBlur:()=>{p||m(!1)},onSelect:()=>{m(!0)},onChange:e=>{d(e.target.value)}}),v&&x.length>0?s.jsx("div",{className:"SearchResults",children:x.map(e=>s.jsx("div",{className:"SearchResult",onClick:()=>{d(e.name)},children:s.jsxs("span",{children:[" ",e.name]})},e.id))}):null]}),s.jsxs("button",{className:"addContentBtn",type:"button",onClick:()=>{o!=""&&(h([...l,r.filter(e=>e.name==o)[0]]),S([...l,r.filter(e=>e.name==o)[0]]),d(""),m(!1))},children:["Add ",f]})]})]})}export{k as S};
