import{j as e,r as t,g as ie,o as Pe,p as ne,q as ve,a as Te,t as De,u as Fe,v as Le,w as Me,x as Je,y as Ue,z as He,A as re,B as Ye,C as Ke,D as We,c as Qe,R as Ze}from"./auth-l123uYc1.js";import{S as Oe}from"./student_tile-ucPgqKjM.js";import{E as Ve,C as ze}from"./close_warning_dialog-BpEjKHTw.js";import{S as ce}from"./search_bar-7c5lsXz1.js";import{B as Xe}from"./back_arrow-IdcwQJqZ.js";import{C as H}from"./close-CDqjbHS0.js";import{P as le}from"./plus-Ip2amvQB.js";import{I as qe}from"./info_dialog-gg6UHO-1.js";import{C as $e,a as _e}from"./choose_colors_dialog-lsoG9GKc.js";import{T as es}from"./trash-arEgRoH7.js";const ss="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAxCAYAAACoJ+s+AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAKKADAAQAAAABAAAAMQAAAAAXFpNfAAAD1UlEQVRYCe2ZSWjVUBSGfbWi1VqxooILBUGcLc4julLBhSCCoKILKxZFxGEluBC6EFxbK9aiIoJUFFw4ICIoDrgpxWrFsdSNAy3a1qGtw/P7Q1LiM8m7Sdr3svDA33vuOeee/Dk3Nzf3NTUghKTT6XGE7wErQXGIoZ2pVGqe4skxhaaZfrfJ+EKTIMWQeBLNeTBC/RiyibFl5NsGybZseQqyBbj8R9HjklO6NFAVz0JypAxBYkSQRDNJMi0oUQSfZkQkA2/aiCCJyiIQ8BuiCjoyGeUMJEscQ2ZrSrA0c2Af9jUzpyE53CunKcEuBn+w0Urb45Ushm0GY09BclhmjlSmwbRPMj07c8FasBoE3az7NXOY2I3AS+oxlrO6vznOoKROjGdLknZwG+wlYD145RkYzjiH8JPcfJEz7K/3II5ROGaDMaA3yAl2tRch1uH00ZsYu4H+cbDIsfu07kXiFTIf4wnyVZC3yyJIR7vCIaDpGgiyyS0COhin91k5qBRhJUWvBktAHNFNVilfAX9EshasAybkCOsVxeumLpBntO4YfSd4ANzinqkWtyNAX4Zve4rEmprKgEAv1yrItDB2Os7LdsAb2i3YW7EPQdd0L7V9albgey8FfwnNIOlZpEeLZE2WIFP3RAL10i11VfK+a/B+fNaixN8B2gzQqQo+JEnYF7FXBR0uL1BUyc/kHoyuZ9Kp5HP0u6ATmEi3CDYRGfbZCyKoCz8DW1Upm6SmW89UWPmikoclZ3KRqQRZeywk9d23C9wzGZgZYz0TmcY+6msB1VLB4jgk+5Og7nMW0B47NCrJ/iYoktqZaiBZFIVkLgiKpM4j1h4blmSuCIrkAlCtVW2T3E3/qRxBkkuC4rEYHINkISS/ox8AP4GvxCWY7cvE68LLMe6TA5LNNFek+4l7E/eL8bJrL5Vo/9VeHHYnGm9XUdW7CvQ96SlRCS4kWyMV0NfLQc/M5saGoNCoU1xBBfSOiy3c5FeSCJ4StYKa4jpIPqZ9C354Zg823oDcHTtEBP85MMkXlaDG6sCl83LUM7MWiEPQdyVHnWJy50b+E4xb5/8VjFnB7qRXsC3pBBuSTFAfInVJJljFTtMYZyeJ+fx7Dv+N9QmogdxNRSSF4A64aLv7aH88iJsliSAIqZcOocw2yc+gxTWfBI2OCyKow0s+xOi6IvguH+xMryuCj/JAUCu23uS6IngORPlkN8nvF3OJlfvJz+m2FxD4GoNOZn39zxn3ddy6ZuyI2xCk61xhCQegCSibgX5HGQv062ivHz2qaHdoB/rl9Tq4RlF+0RrJH/T5KYIhbDcJAAAAAElFTkSuQmCC";function ts({name:S,projectId:b,classId:w,groupId:N,deleteGroup:E}){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"GroupTile",onClick:()=>{const l=new URL(window.location.origin);l.searchParams.set("classId",w),l.searchParams.set("projectId",b),l.searchParams.set("groupId",N),window.location.href=l.origin+"/Group/"+l.search},children:[e.jsx("h2",{className:"GroupName",children:S}),e.jsx("img",{src:es,alt:"delete group",className:"GroupTrashIcon",onClick:l=>{l.stopPropagation(),E(N)}})]})})}const os="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAqCAYAAAAnH9IiAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAALaADAAQAAAABAAAAKgAAAAD0iNlAAAADG0lEQVRYCe2ZTahNURTH37nE8zERno+JGTJRwuRl5nMoooRSDF5REhlIvZcYYECiDJTkEUk+egPFRGFgQEbkTRg8n+UrH0+4fv/j7Gt13r23s+/d994zuKv+d6999tpr/c866+6z971RRyLFYnE66nqwCHSBcSCkFHH2DQyB++ByFEWfab0l0gwIL6U5CkITlftK8p6BHog/qWRQ6XoE4VkM3gCdlYwaeP0dvldA/KtPjNEYbwKW8G3618FHEFL0VKeAjWBB4ngq7WpwPulna8j0AHiW4Ei2WbVbEUdP95KJedLXW4EJM82kq0ZviEop6At5zTifYfRMqkiPN5avjN5I9bVxPsHomVSRtqIsNENsnHgF8wmaJu0zt2W2bdLNSn070yEyzfpdANOq+cpjpk9A+C7ED+kGypEve7GcYROvzUtiraHtg/iIJVF7j1aIdnZbk8DfUwT66CvbY8A68AMcBP+FO3H7DrXa8bVc4NENHhtuuy2pPJZHB/uTe5DcAr4kZLdxA9sd8VySFjmIP6LZDD6oj+yAeFxSQWoaZ6twOgeM+NIoWo3yi3k6ng0A7cEle4g1XDdpnCzB2bHYZXM+9oUoj7HN4VqKEtWdaVzdAb1gNghdHlruJoG1wMmpukknJ5GLzmPIltLTEnzW+DxDvOMhysP4DKdCWE/uAnDHwX4IH1aEXJKG8Hy49QOd3iVXwIFY46Pu8nCOfFpITcTevX2HyeCgm8/YYvTTwJ1db6LvT8owNmsJaSIvBCImeQGWx9q/D+0zHOFb6Hsh/MeM57I8XiYEtSrtgvBvS1h6qzKd5mH7PXRUOoO2JKxB7khD9CcEn1uSaT2Xq0eaZLrfJp3OSKP67UzXmNmi7zxl2h4sq/7e4Ou8in2XGbPxzeXKqki/NcMrjd5I1cZ54xtI6/RD4PYBG3j360b0vv8EQor22pOBjk7dxrHie4n+SpjLDP0DMMprZhhjnbaX8UJxh9dMXgtMeIplLxjxjs/koXYjHVp3+hJWuNLxiIzrNK1Hpx2YviidoDSOXq9olRDRIfAAnIOwdG/5CxqR4HbNSg30AAAAAElFTkSuQmCC";function as(){const[S,b]=t.useState([]),[w,N]=t.useState([]),[E,l]=t.useState([]),[G,de]=t.useState(""),[Y,ue]=t.useState(!1),[a,Ae]=t.useState(""),[n,je]=t.useState(""),y=t.useRef(null),k=t.useRef(null),[K,B]=t.useState(""),[x,pe]=t.useState(""),g=t.useRef(null),[ge,C]=t.useState(""),[me,f]=t.useState(""),[P,W]=t.useState(""),[v,Q]=t.useState(""),[Z,O]=t.useState(""),[V,z]=t.useState(""),X=t.useRef(null),q=t.useRef(null),$=t.useRef(null),[_,ee]=t.useState(!1),m=t.useRef(null),[he,xe]=t.useState(),[T,D]=t.useState(""),[se,Ce]=t.useState(""),[i,h]=t.useState([]),[fe,te]=t.useState(!1),[Ie,Se]=t.useState(!0),[we,Ne]=t.useState([]),[F,Ee]=t.useState(""),[ke,L]=t.useState(!1),M=t.useRef(null),[Re,oe]=t.useState(!1);t.useEffect(()=>{u(),console.log("Fetched Students")},[]);async function u(){var ae;const s=await ie();pe(s);const I=window.location.search,r=new URLSearchParams(I);if(!r.has("classId"))throw Error("missing class id!");if(!r.has("projectId"))throw Error("missing project id!");const o=r.get("classId");je(o);const A=await Pe(o),c=await ne(A.students);N(c);const d=r.get("projectId"),j=await ve(o,d);de(j.name),B(j.name),W(j.background),z(j.cardColor),Q(j.backgroundColor),O(j.evalBackgroundColor),Ae(d);const J=await Te(s);ue(J);const U=await De(o,d);if(U.sort((p,R)=>p.index-R.index),J)l(U);else{const p=await Fe(o,d,s);if(p!=null){ee(!0),Ce(p.id);const R=await ne(p.students);console.log(R),console.log(p.students),b(R)}else Ne(U)}J&&(await Le(o,d)).length==0&&((ae=y.current)==null||ae.showModal()),Se(!1)}const be=async()=>{var s;await He(n,a,K,P,v,V,Z),(s=k.current)==null||s.close(),await u()},Ge=async()=>{var r,o,A;const s=i.map(c=>c.id);for(let c=0;c<i.length;c++){const d=i[c];if(await re(n,a,d.id)){C(`${d.name} is already in another group`),f("Unable to create group"),(r=g.current)==null||r.showModal();return}}if(E.find(c=>c.name==T)!=null){C("A group with that name already exists!"),f("Unable to create group"),(o=g.current)==null||o.showModal();return}await Ye(n,a,T,s),await u(),(A=m.current)==null||A.close()},ye=async s=>{await Ke(n,a,s),await u()},Be=async()=>{var I,r;oe(!0);const s=i.map(o=>o.id);for(let o=0;o<i.length;o++){const A=i[o];if(await re(n,a,A.id)){C(`${A.name} is already in another group`),f("Unable to add students"),(I=g.current)==null||I.showModal();return}}await We(n,a,se,s),await u(),(r=M.current)==null||r.close(),oe(!1)};return e.jsxs(e.Fragment,{children:[Ie?e.jsx("div",{className:"Loading"}):e.jsxs("div",{className:"Center "+P,style:{backgroundColor:v},children:[e.jsx("h2",{className:"Title",children:G}),Y?e.jsxs("div",{className:"TeacherIcons",children:[e.jsx("img",{src:ss,alt:"copy project",className:"CopyIcon",onClick:async()=>{var s;te(!0),await Me(n,a),C("Project copied successfully!"),f("Project Copied"),(s=g.current)==null||s.showModal()}}),e.jsx("img",{src:Ve,alt:"edit project",className:"EditIcon",onClick:()=>{var s;(s=k.current)==null||s.showModal()}}),e.jsx("img",{src:le,alt:"add group",className:"PlusIcon",onClick:()=>{var s;(s=m.current)==null||s.showModal()}})]}):_&&e.jsxs("div",{className:"StudentIcons",children:[e.jsx("img",{src:os,alt:"leave group",className:"LeaveIcon",onClick:async()=>{await Je(n,a,se,x),ee(!1),await u()}}),e.jsx("img",{src:le,alt:"add group",className:"PlusIcon",onClick:()=>{var s;(s=M.current)==null||s.showModal()}})]}),e.jsx("img",{src:Xe,alt:"back",className:"BackArrow",onClick:()=>{const s=new URL(window.location.href);s.searchParams.delete("projectId"),window.location.href=s.origin+"/Projects/"+s.search}}),Y?e.jsxs(e.Fragment,{children:[e.jsx("h3",{children:"Groups:"}),e.jsx("div",{className:"Students",children:E.map(s=>e.jsx(ts,{name:s.name,groupId:s.id,projectId:a,classId:n,deleteGroup:ye},s.id))})]}):_?e.jsxs(e.Fragment,{children:[e.jsx("h3",{children:"Students:"}),e.jsx("div",{className:"Students",children:S.map(s=>e.jsx(Oe,{name:s.name,id:s.id,projectId:a,classId:n,projectName:G},s.id))})]}):e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("h3",{className:"joinGroupWarning",children:"Please join a group!"}),e.jsx("h2",{children:"Groups: "}),e.jsxs("select",{className:"groupsSelect",onChange:s=>{Ee(s.target.value)},children:[e.jsx("option",{value:"",children:"Select a group"}),we.map(s=>e.jsx("option",{value:s.id,children:s.name}))]}),e.jsx("br",{}),ke?e.jsx("div",{className:"LoadingJoin"}):e.jsx("button",{type:"button",onClick:async()=>{var s;if(L(!0),F==""){C("Please select a group!"),f("Unable to join group"),(s=g.current)==null||s.showModal(),L(!1);return}console.log(F),console.log(x),await Ue(n,a,F,x),await u(),L(!1)},children:"Join Group"})]}),e.jsx("br",{})]}),e.jsxs("dialog",{ref:y,className:"warningDialog",children:[e.jsx("label",{children:"This project has no evaluation template! You need to create one before you can evaluate students."}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{onClick:()=>{const s=new URL(window.location.origin);s.searchParams.set("projectId",a),s.searchParams.set("classId",n),window.location.href=s.origin+"/Project/Editor/"+s.search},children:"Create Eval Template"}),e.jsx("span",{children:" "}),e.jsx("button",{onClick:()=>{var s;(s=y.current)==null||s.close()},children:"Close"})]}),e.jsxs("dialog",{ref:k,className:"EditProjDialog",children:[e.jsx("h2",{children:"Edit Project"}),e.jsx("img",{src:H,alt:"close",className:"CloseIcon",onClick:()=>{var s;xe(k),(s=$.current)==null||s.showModal()}}),e.jsxs("form",{children:[e.jsxs("div",{className:"EditSides",children:[e.jsxs("div",{className:"EditLeft",children:[e.jsx("label",{htmlFor:"projectName",children:"Project Name:"}),e.jsx("span",{children:" "}),e.jsx("input",{type:"text",name:"projectName",id:"projectName",value:K,onChange:s=>{B(s.target.value)}}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{type:"button",onClick:()=>{const s=new URL(window.location.origin);s.searchParams.set("projectId",a),s.searchParams.set("classId",n),window.location.href=s.origin+"/Project/Editor/"+s.search},children:"Edit Project Template"})]}),e.jsxs("div",{className:"EditRight",children:[e.jsx("button",{type:"button",onClick:()=>{var s;(s=q.current)==null||s.showModal()},children:"Edit Background"}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{type:"button",onClick:()=>{var s;(s=X.current)==null||s.showModal()},children:"Edit Colors"})]})]}),e.jsx("button",{type:"button",onClick:be,children:"Save Project"})]})]}),e.jsx(qe,{info:ge,Title:me,infoModalRef:g,onClose:()=>{if(!fe)return;te(!1);const s=new URL(window.location.href);s.searchParams.delete("projectId"),window.location.href=s.origin+"/Projects/"+s.search}}),e.jsxs("dialog",{ref:m,onClose:()=>{var s;D(""),h([]),(s=m.current)==null||s.close()},children:[e.jsx("h2",{children:"Create Group"}),e.jsx("img",{src:H,alt:"close",className:"CloseIcon",onClick:()=>{var s;D(""),h([]),(s=m.current)==null||s.close()}}),e.jsxs("form",{children:[e.jsx("label",{htmlFor:"groupName",children:"Group Name:"}),e.jsx("span",{children:" "}),e.jsx("input",{type:"text",name:"groupName",id:"groupName",value:T,onChange:s=>{D(s.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",className:"InviteTitle",children:"Students: "}),e.jsx(ce,{name:"Student",content:w,currentUserId:x,defaultAddedContent:i,updateContent:s=>{h(s)}}),e.jsx("br",{}),e.jsx("button",{type:"button",onClick:Ge,children:"Create Group"})]})]}),e.jsxs("dialog",{ref:M,onClose:()=>{h([])},children:[e.jsx("h2",{children:"Add Student to Group"}),e.jsx("img",{src:H,alt:"close",className:"CloseIcon",onClick:()=>{var s;h([]),(s=m.current)==null||s.close()}}),e.jsxs("form",{children:[e.jsx("label",{htmlFor:"",className:"InviteTitle",children:"Group Students: "}),e.jsx(ce,{name:"Student",content:w,currentUserId:x,defaultAddedContent:i,updateContent:s=>{h(s)}}),e.jsx("br",{}),Re?e.jsx("div",{className:"LoadingJoin"}):e.jsx("button",{type:"button",onClick:Be,children:"Add Students"})]})]}),e.jsx(ze,{closeWarningRef:$,connectedRef:he,onYes:()=>{B(G)}}),e.jsx($e,{setBackground:W,backgroundRef:q,currentBackground:P}),e.jsx(_e,{setBgColor:Q,colorRef:X,currentBgColor:v,isProject:!0,currentTileColor:V,setTileColor:z,currentEvalBgColor:Z,setEvalBgColor:O})]})}async function ns(){await ie()||(window.location.href=window.location.origin+"/Login/")}(async()=>await ns())();Qe.createRoot(document.getElementById("root")).render(e.jsx(Ze.StrictMode,{children:e.jsx(as,{})}));
