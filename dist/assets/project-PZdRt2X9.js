import{j as e,r as t,g as le,o as ve,p as ne,q as Te,a as De,t as Je,u as Le,v as Ue,w as Ke,x as Fe,y as Me,z as He,A as re,B as Ye,C as We,D as Ve,c as Xe,R as Qe}from"./auth-l123uYc1.js";import{S as Oe}from"./student_tile-ZKY392sM.js";import{E as ze,C as qe}from"./close_warning_dialog-BpEjKHTw.js";import{S as ce}from"./search_bar-7c5lsXz1.js";import{B as Ze}from"./back_arrow-IdcwQJqZ.js";import{C as Y}from"./close-CDqjbHS0.js";import{P as $e}from"./plus-Ip2amvQB.js";import{I as _e}from"./info_dialog-gg6UHO-1.js";import{C as es,a as ss}from"./choose_colors_dialog-lsoG9GKc.js";import{T as ts}from"./trash-arEgRoH7.js";const os="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAxCAYAAACoJ+s+AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAKKADAAQAAAABAAAAMQAAAAAXFpNfAAAD1UlEQVRYCe2ZSWjVUBSGfbWi1VqxooILBUGcLc4julLBhSCCoKILKxZFxGEluBC6EFxbK9aiIoJUFFw4ICIoDrgpxWrFsdSNAy3a1qGtw/P7Q1LiM8m7Sdr3svDA33vuOeee/Dk3Nzf3NTUghKTT6XGE7wErQXGIoZ2pVGqe4skxhaaZfrfJ+EKTIMWQeBLNeTBC/RiyibFl5NsGybZseQqyBbj8R9HjklO6NFAVz0JypAxBYkSQRDNJMi0oUQSfZkQkA2/aiCCJyiIQ8BuiCjoyGeUMJEscQ2ZrSrA0c2Af9jUzpyE53CunKcEuBn+w0Urb45Ushm0GY09BclhmjlSmwbRPMj07c8FasBoE3az7NXOY2I3AS+oxlrO6vznOoKROjGdLknZwG+wlYD145RkYzjiH8JPcfJEz7K/3II5ROGaDMaA3yAl2tRch1uH00ZsYu4H+cbDIsfu07kXiFTIf4wnyVZC3yyJIR7vCIaDpGgiyyS0COhin91k5qBRhJUWvBktAHNFNVilfAX9EshasAybkCOsVxeumLpBntO4YfSd4ANzinqkWtyNAX4Zve4rEmprKgEAv1yrItDB2Os7LdsAb2i3YW7EPQdd0L7V9albgey8FfwnNIOlZpEeLZE2WIFP3RAL10i11VfK+a/B+fNaixN8B2gzQqQo+JEnYF7FXBR0uL1BUyc/kHoyuZ9Kp5HP0u6ATmEi3CDYRGfbZCyKoCz8DW1Upm6SmW89UWPmikoclZ3KRqQRZeywk9d23C9wzGZgZYz0TmcY+6msB1VLB4jgk+5Og7nMW0B47NCrJ/iYoktqZaiBZFIVkLgiKpM4j1h4blmSuCIrkAlCtVW2T3E3/qRxBkkuC4rEYHINkISS/ox8AP4GvxCWY7cvE68LLMe6TA5LNNFek+4l7E/eL8bJrL5Vo/9VeHHYnGm9XUdW7CvQ96SlRCS4kWyMV0NfLQc/M5saGoNCoU1xBBfSOiy3c5FeSCJ4StYKa4jpIPqZ9C354Zg823oDcHTtEBP85MMkXlaDG6sCl83LUM7MWiEPQdyVHnWJy50b+E4xb5/8VjFnB7qRXsC3pBBuSTFAfInVJJljFTtMYZyeJ+fx7Dv+N9QmogdxNRSSF4A64aLv7aH88iJsliSAIqZcOocw2yc+gxTWfBI2OCyKow0s+xOi6IvguH+xMryuCj/JAUCu23uS6IngORPlkN8nvF3OJlfvJz+m2FxD4GoNOZn39zxn3ddy6ZuyI2xCk61xhCQegCSibgX5HGQv062ivHz2qaHdoB/rl9Tq4RlF+0RrJH/T5KYIhbDcJAAAAAElFTkSuQmCC";function as({name:I,projectId:k,classId:E,groupId:w,deleteGroup:N}){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"GroupTile",onClick:()=>{const l=new URL(window.location.origin);l.searchParams.set("classId",E),l.searchParams.set("projectId",k),l.searchParams.set("groupId",w),window.location.href=l.origin+"/Group/"+l.search},children:[e.jsx("h2",{className:"GroupName",children:I}),e.jsx("img",{src:ts,alt:"delete group",className:"GroupTrashIcon",onClick:l=>{l.stopPropagation(),N(w)}})]})})}const ns="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAqCAYAAAAnH9IiAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAALaADAAQAAAABAAAAKgAAAAD0iNlAAAADG0lEQVRYCe2ZTahNURTH37nE8zERno+JGTJRwuRl5nMoooRSDF5REhlIvZcYYECiDJTkEUk+egPFRGFgQEbkTRg8n+UrH0+4fv/j7Gt13r23s+/d994zuKv+d6999tpr/c866+6z971RRyLFYnE66nqwCHSBcSCkFHH2DQyB++ByFEWfab0l0gwIL6U5CkITlftK8p6BHog/qWRQ6XoE4VkM3gCdlYwaeP0dvldA/KtPjNEYbwKW8G3618FHEFL0VKeAjWBB4ngq7WpwPulna8j0AHiW4Ei2WbVbEUdP95KJedLXW4EJM82kq0ZviEop6At5zTifYfRMqkiPN5avjN5I9bVxPsHomVSRtqIsNENsnHgF8wmaJu0zt2W2bdLNSn070yEyzfpdANOq+cpjpk9A+C7ED+kGypEve7GcYROvzUtiraHtg/iIJVF7j1aIdnZbk8DfUwT66CvbY8A68AMcBP+FO3H7DrXa8bVc4NENHhtuuy2pPJZHB/uTe5DcAr4kZLdxA9sd8VySFjmIP6LZDD6oj+yAeFxSQWoaZ6twOgeM+NIoWo3yi3k6ng0A7cEle4g1XDdpnCzB2bHYZXM+9oUoj7HN4VqKEtWdaVzdAb1gNghdHlruJoG1wMmpukknJ5GLzmPIltLTEnzW+DxDvOMhysP4DKdCWE/uAnDHwX4IH1aEXJKG8Hy49QOd3iVXwIFY46Pu8nCOfFpITcTevX2HyeCgm8/YYvTTwJ1db6LvT8owNmsJaSIvBCImeQGWx9q/D+0zHOFb6Hsh/MeM57I8XiYEtSrtgvBvS1h6qzKd5mH7PXRUOoO2JKxB7khD9CcEn1uSaT2Xq0eaZLrfJp3OSKP67UzXmNmi7zxl2h4sq/7e4Ou8in2XGbPxzeXKqki/NcMrjd5I1cZ54xtI6/RD4PYBG3j360b0vv8EQor22pOBjk7dxrHie4n+SpjLDP0DMMprZhhjnbaX8UJxh9dMXgtMeIplLxjxjs/koXYjHVp3+hJWuNLxiIzrNK1Hpx2YviidoDSOXq9olRDRIfAAnIOwdG/5CxqR4HbNSg30AAAAAElFTkSuQmCC",rs="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAyCAYAAAAnWDnqAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAALKADAAQAAAABAAAAMgAAAAAjvs5AAAAFQklEQVRoBe2Ya4hVVRTH506lOTqWlvlAUjB62UOzLCIyn2AY1IeBhOyLyZgEJfkC8YNCkZog9EEJ+2D4yQSVtHylDc2UEqgJ+Szfr0zzNb7N6fe/nD2zzrnnnHuvs+98yFnwn7X22muv/T/77rP2PlNW1iqtK9C6Aq0r8L9agUwpn6ahoaGS/ENAX9AZXAB/gh8ymcxJdNFSEsIQbQuTajAW3BvDqgHfSjAX4qdj+hNd3glDViu5APRLnLWp4xTmOEjvbnKlW14JQ/YeplsCLNnfaH8LjgE9zFCgbeLkDMZbkP7LOVpMQ/hDsCfALvSYuMnxvwK2BnGKXxQXV1Ifk3YC2wyJCWkTEjfYxIp0/7R411fuDA96ODkqgjyqAF+m5WQLbKK/1sS8YexE0yfhl80s30HopmknmatMx0vGTjR9Eu5uZtlp7DTTVgc7PnGMT8LtzSxXjJ1mXjWdbdnHeauWT8L2AHjIEEkzbdxZtpEOlFTxSXifmelFY6eZdt/uSQt0fT4J17ik6KH8vKl7kn4d2VVmjB1v3GHTJ+GfSf1HkF4n3qeQuis8Xag1jVaXwFOPXh7qTWh4I8z+u8Ucc808KnMLIf2g8ZXRrgCz8I02/gWM100ur+R9K/NmiARAZjKu94xbleAncARoRQeBjsDJRowJhbxwGuCdsJJC+iPU+ALyryZmKmRvoAuSkhDWzJDW3WASGACi86iifAHRteiiJJqoqMGFBENc1eJJoL18DuyD6H70nSEtscJtWMoOQEf3dVDPCl9C35Z4JczPr3zPgsHgafAYCJU12hKVsANAXyO/gDoe4ho6r3ghDFGVqbfBO6Br3llzA7TiK8FiiB/M7W7yJBKGhF6UYUDfZ6qfOhhOgF/BehIfRmeF2J4YX4HeWUf4j1bzLNANTifgfSBu1XGX/QuWgXnkPy9HVHIIM3lfgnRsDowGm7ZuVd8DJT4qP+NE4hsgUurTYfE7/frIDAmx7XA8Dl4A+lJ5BljRzW8KY+usU3aIMIl0XM4AaXcAjXNyEWMiiUVOpB9AnaOtlSpYGKe9Xg1eB46TftFPyLUE3SiuU5O9i3d6Y0/YqKd5N9ANKyoiV+1IRzuLacNBh81s0MuME+mvXTtLmED9NItB3Moewa8PRL1YG4DKVFS00m+SOLs9op3FtOGi8jcfvBqM0/YbT+4f1S4nQKS1snFkFXOA4CtA/+j4R44YqcT3cYy/aBfzqGK8D2qCweL3GTzvV1vXy0HgCTUSRE/oxNrO5/RIkj7sGs3RkL7J+IngUJCnE/oD2SI8QoYH0UrojfciwUrPMsmqWJBKEdb+taJ6qXrroBrq5G8M5z+JraPWSloptHEF2ZCuJXBvEKwX/jW9+d0Ch5RemlEEinSO4K+yTp64K+11wFUPm8uGNsfezOBHgwRPibBW2clljKuuUYDWKab95qQxFw8zAKdOyebKcyZBexHWz6w7q0RPsorJVBGc7GBlVWZUqz9HdQ46tGd7gw5BW+qUsVUKdRD5lF0ivB04wkr+SADZEruCz9O2sdkA82ebsfsY24e5hiRLRViHwUgfGcmh/eykBmOLa9yGVgnVt57uFVv5lQ+is8etJjkOesjRDKkl6V43HnuRs33qchJfJ+GclKTd2LsZ0I6Y7GkTE6scs2P83l16cbICIR3PugDFiVauAvSM68SnT/UVCX1e3Zaw7hLTQBLpuIn1Qs6E7NK4zlL4Ggm75Ky0XsApoIfzJegd+HX1U5VpMckhrJkh3QY1AgwD/UAXcAvoWNabvxbUQTbtMkSIf/kPVb+P+zjjVm0AAAAASUVORK5CYII=";function cs(){const[I,k]=t.useState([]),[E,w]=t.useState([]),[N,l]=t.useState([]),[b,ie]=t.useState(""),[y,Ae]=t.useState(!1),[a,de]=t.useState(""),[n,ue]=t.useState(""),P=t.useRef(null),R=t.useRef(null),[W,v]=t.useState(""),[h,ge]=t.useState(""),m=t.useRef(null),[je,C]=t.useState(""),[me,f]=t.useState(""),[T,V]=t.useState(""),[D,X]=t.useState(""),[Q,O]=t.useState(""),[z,q]=t.useState(""),Z=t.useRef(null),$=t.useRef(null),_=t.useRef(null),[J,ee]=t.useState(!1),x=t.useRef(null),[pe,he]=t.useState(),[L,U]=t.useState(""),[se,Ce]=t.useState(""),[i,p]=t.useState([]),[fe,te]=t.useState(!1),[xe,Se]=t.useState(!0),[Ie,Ee]=t.useState([]),[K,we]=t.useState(""),[Ne,F]=t.useState(!1),B=t.useRef(null),[Re,oe]=t.useState(!1),[Be,Ge]=t.useState("");t.useEffect(()=>{u(),console.log("Fetched Students")},[]);async function u(){var ae;const s=await le();ge(s);const S=window.location.search,r=new URLSearchParams(S);if(!r.has("classId"))throw Error("missing class id!");if(!r.has("projectId"))throw Error("missing project id!");const o=r.get("classId");ue(o);const g=await ve(o),c=await ne(g.students);w(c);const A=r.get("projectId"),j=await Te(o,A);ie(j.name),v(j.name),V(j.background),q(j.cardColor),X(j.backgroundColor),O(j.evalBackgroundColor),de(A);const M=await De(s);Ae(M);const H=await Je(o,A);if(H.sort((d,G)=>d.index-G.index),M)l(H);else{const d=await Le(o,A,s);if(d!=null){ee(!0),Ce(d.id),Ge(d.name);const G=await ne(d.students);console.log(G),console.log(d.students),k(G)}else Ee(H)}M&&(await Ue(o,A)).length==0&&((ae=P.current)==null||ae.showModal()),Se(!1)}const ke=async()=>{var s;await He(n,a,W,T,D,z,Q),(s=R.current)==null||s.close(),await u()},be=async()=>{var r,o,g;const s=i.map(c=>c.id);for(let c=0;c<i.length;c++){const A=i[c];if(await re(n,a,A.id)){C(`${A.name} is already in another group`),f("Unable to create group"),(r=m.current)==null||r.showModal();return}}if(N.find(c=>c.name==L)!=null){C("A group with that name already exists!"),f("Unable to create group"),(o=m.current)==null||o.showModal();return}await Ye(n,a,L,s),await u(),(g=x.current)==null||g.close()},ye=async s=>{await We(n,a,s),await u()},Pe=async()=>{var S,r;oe(!0);const s=i.map(o=>o.id);for(let o=0;o<i.length;o++){const g=i[o];if(await re(n,a,g.id)){C(`${g.name} is already in another group`),f("Unable to add students"),(S=m.current)==null||S.showModal();return}}await Ve(n,a,se,s),await u(),(r=B.current)==null||r.close(),oe(!1)};return e.jsxs(e.Fragment,{children:[xe?e.jsx("div",{className:"Loading"}):e.jsxs("div",{className:"Center "+T,style:{backgroundColor:D},children:[e.jsx("h2",{className:"Title",children:b}),y?e.jsxs("div",{className:"TeacherIcons",children:[e.jsx("img",{src:os,alt:"copy project",className:"CopyIcon",onClick:async()=>{var s;te(!0),await Ke(n,a),C("Project copied successfully!"),f("Project Copied"),(s=m.current)==null||s.showModal()}}),e.jsx("img",{src:ze,alt:"edit project",className:"EditIcon",onClick:()=>{var s;(s=R.current)==null||s.showModal()}}),e.jsx("img",{src:$e,alt:"add group",className:"PlusIcon",onClick:()=>{var s;(s=x.current)==null||s.showModal()}})]}):J&&e.jsxs("div",{className:"StudentIcons",children:[e.jsx("img",{src:ns,alt:"leave group",className:"LeaveIcon",onClick:async()=>{await Fe(n,a,se,h),ee(!1),await u()}}),e.jsx("img",{src:rs,alt:"add group",className:"PlusIcon",onClick:()=>{var s;(s=B.current)==null||s.showModal()}})]}),e.jsx("img",{src:Ze,alt:"back",className:"BackArrow",onClick:()=>{const s=new URL(window.location.href);s.searchParams.delete("projectId"),window.location.href=s.origin+"/Projects/"+s.search}}),!y&&J&&e.jsx("h2",{className:"StudentGroupName",children:Be}),y?e.jsxs(e.Fragment,{children:[e.jsx("h3",{children:"Groups:"}),e.jsx("div",{className:"Students",children:N.map(s=>e.jsx(as,{name:s.name,groupId:s.id,projectId:a,classId:n,deleteGroup:ye},s.id))})]}):J?e.jsxs(e.Fragment,{children:[e.jsx("h3",{children:"Students:"}),e.jsx("div",{className:"Students",children:I.map(s=>e.jsx(Oe,{name:s.name,id:s.id,projectId:a,classId:n,projectName:b},s.id))})]}):e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("h3",{className:"joinGroupWarning",children:"Please join a group!"}),e.jsx("h2",{children:"Groups: "}),e.jsxs("select",{className:"groupsSelect",onChange:s=>{we(s.target.value)},children:[e.jsx("option",{value:"",children:"Select a group"}),Ie.map(s=>e.jsx("option",{value:s.id,children:s.name}))]}),e.jsx("br",{}),Ne?e.jsx("div",{className:"LoadingJoin"}):e.jsx("button",{type:"button",onClick:async()=>{var s;if(F(!0),K==""){C("Please select a group!"),f("Unable to join group"),(s=m.current)==null||s.showModal(),F(!1);return}console.log(K),console.log(h),await Me(n,a,K,h),await u(),F(!1)},children:"Join Group"})]}),e.jsx("br",{})]}),e.jsxs("dialog",{ref:P,className:"warningDialog",children:[e.jsx("label",{children:"This project has no evaluation template! You need to create one before you can evaluate students."}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{onClick:()=>{const s=new URL(window.location.origin);s.searchParams.set("projectId",a),s.searchParams.set("classId",n),window.location.href=s.origin+"/Project/Editor/"+s.search},children:"Create Eval Template"}),e.jsx("span",{children:" "}),e.jsx("button",{onClick:()=>{var s;(s=P.current)==null||s.close()},children:"Close"})]}),e.jsxs("dialog",{ref:R,className:"EditProjDialog",children:[e.jsx("h2",{children:"Edit Project"}),e.jsx("img",{src:Y,alt:"close",className:"CloseIcon",onClick:()=>{var s;he(R),(s=_.current)==null||s.showModal()}}),e.jsxs("form",{children:[e.jsxs("div",{className:"EditSides",children:[e.jsxs("div",{className:"EditLeft",children:[e.jsx("label",{htmlFor:"projectName",children:"Project Name:"}),e.jsx("span",{children:" "}),e.jsx("input",{type:"text",name:"projectName",id:"projectName",value:W,onChange:s=>{v(s.target.value)}}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{type:"button",onClick:()=>{const s=new URL(window.location.origin);s.searchParams.set("projectId",a),s.searchParams.set("classId",n),window.location.href=s.origin+"/Project/Editor/"+s.search},children:"Edit Project Template"})]}),e.jsxs("div",{className:"EditRight",children:[e.jsx("button",{type:"button",onClick:()=>{var s;(s=$.current)==null||s.showModal()},children:"Edit Background"}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{type:"button",onClick:()=>{var s;(s=Z.current)==null||s.showModal()},children:"Edit Colors"})]})]}),e.jsx("button",{type:"button",onClick:ke,children:"Save Project"})]})]}),e.jsx(_e,{info:je,Title:me,infoModalRef:m,onClose:()=>{if(!fe)return;te(!1);const s=new URL(window.location.href);s.searchParams.delete("projectId"),window.location.href=s.origin+"/Projects/"+s.search}}),e.jsxs("dialog",{ref:x,onClose:()=>{var s;U(""),p([]),(s=x.current)==null||s.close()},children:[e.jsx("h2",{children:"Create Group"}),e.jsx("img",{src:Y,alt:"close",className:"CloseIcon",onClick:()=>{var s;U(""),p([]),(s=x.current)==null||s.close()}}),e.jsxs("form",{children:[e.jsx("label",{htmlFor:"groupName",children:"Group Name:"}),e.jsx("span",{children:" "}),e.jsx("input",{type:"text",name:"groupName",id:"groupName",value:L,onChange:s=>{U(s.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",className:"InviteTitle",children:"Students: "}),e.jsx(ce,{name:"Student",content:E,currentUserId:h,defaultAddedContent:i,updateContent:s=>{p(s)}}),e.jsx("br",{}),e.jsx("button",{type:"button",onClick:be,children:"Create Group"})]})]}),e.jsxs("dialog",{ref:B,className:"AddStudentDialog",onClose:()=>{p([])},children:[e.jsx("h2",{children:"Add Student to Group"}),e.jsx("img",{src:Y,alt:"close",className:"CloseIcon",onClick:()=>{var s;p([]),(s=B.current)==null||s.close()}}),e.jsxs("form",{children:[e.jsx("label",{htmlFor:"",className:"InviteTitle",children:"Group Students: "}),e.jsx(ce,{name:"Student",content:E,currentUserId:h,defaultAddedContent:i,updateContent:s=>{p(s)}}),e.jsx("br",{}),Re?e.jsx("div",{className:"LoadingJoin"}):e.jsx("button",{type:"button",onClick:Pe,children:"Add Students"})]})]}),e.jsx(qe,{closeWarningRef:_,connectedRef:pe,onYes:()=>{v(b)}}),e.jsx(es,{setBackground:V,backgroundRef:$,currentBackground:T}),e.jsx(ss,{setBgColor:X,colorRef:Z,currentBgColor:D,isProject:!0,currentTileColor:z,setTileColor:q,currentEvalBgColor:Q,setEvalBgColor:O})]})}async function ls(){await le()||(window.location.href=window.location.origin+"/Login/")}(async()=>await ls())();Xe.createRoot(document.getElementById("root")).render(e.jsx(Qe.StrictMode,{children:e.jsx(cs,{})}));
