import{j as e,r as s,g as ie,o as Te,p as ne,q as De,a as Fe,t as Le,u as Me,v as Je,w as Ue,x as He,y as Ye,z as Ke,A as re,B as We,C as Qe,D as Ze,c as Oe,R as Ve}from"./auth-l123uYc1.js";import{S as ze}from"./student_tile-ZKY392sM.js";import{E as Xe,C as qe}from"./close_warning_dialog-BpEjKHTw.js";import{S as ce}from"./search_bar-7c5lsXz1.js";import{B as $e}from"./back_arrow-IdcwQJqZ.js";import{C as K}from"./close-CDqjbHS0.js";import{P as le}from"./plus-Ip2amvQB.js";import{I as _e}from"./info_dialog-gg6UHO-1.js";import{C as et,a as tt}from"./choose_colors_dialog-lsoG9GKc.js";import{T as st}from"./trash-arEgRoH7.js";const ot="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAxCAYAAACoJ+s+AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAKKADAAQAAAABAAAAMQAAAAAXFpNfAAAD1UlEQVRYCe2ZSWjVUBSGfbWi1VqxooILBUGcLc4julLBhSCCoKILKxZFxGEluBC6EFxbK9aiIoJUFFw4ICIoDrgpxWrFsdSNAy3a1qGtw/P7Q1LiM8m7Sdr3svDA33vuOeee/Dk3Nzf3NTUghKTT6XGE7wErQXGIoZ2pVGqe4skxhaaZfrfJ+EKTIMWQeBLNeTBC/RiyibFl5NsGybZseQqyBbj8R9HjklO6NFAVz0JypAxBYkSQRDNJMi0oUQSfZkQkA2/aiCCJyiIQ8BuiCjoyGeUMJEscQ2ZrSrA0c2Af9jUzpyE53CunKcEuBn+w0Urb45Ushm0GY09BclhmjlSmwbRPMj07c8FasBoE3az7NXOY2I3AS+oxlrO6vznOoKROjGdLknZwG+wlYD145RkYzjiH8JPcfJEz7K/3II5ROGaDMaA3yAl2tRch1uH00ZsYu4H+cbDIsfu07kXiFTIf4wnyVZC3yyJIR7vCIaDpGgiyyS0COhin91k5qBRhJUWvBktAHNFNVilfAX9EshasAybkCOsVxeumLpBntO4YfSd4ANzinqkWtyNAX4Zve4rEmprKgEAv1yrItDB2Os7LdsAb2i3YW7EPQdd0L7V9albgey8FfwnNIOlZpEeLZE2WIFP3RAL10i11VfK+a/B+fNaixN8B2gzQqQo+JEnYF7FXBR0uL1BUyc/kHoyuZ9Kp5HP0u6ATmEi3CDYRGfbZCyKoCz8DW1Upm6SmW89UWPmikoclZ3KRqQRZeywk9d23C9wzGZgZYz0TmcY+6msB1VLB4jgk+5Og7nMW0B47NCrJ/iYoktqZaiBZFIVkLgiKpM4j1h4blmSuCIrkAlCtVW2T3E3/qRxBkkuC4rEYHINkISS/ox8AP4GvxCWY7cvE68LLMe6TA5LNNFek+4l7E/eL8bJrL5Vo/9VeHHYnGm9XUdW7CvQ96SlRCS4kWyMV0NfLQc/M5saGoNCoU1xBBfSOiy3c5FeSCJ4StYKa4jpIPqZ9C354Zg823oDcHTtEBP85MMkXlaDG6sCl83LUM7MWiEPQdyVHnWJy50b+E4xb5/8VjFnB7qRXsC3pBBuSTFAfInVJJljFTtMYZyeJ+fx7Dv+N9QmogdxNRSSF4A64aLv7aH88iJsliSAIqZcOocw2yc+gxTWfBI2OCyKow0s+xOi6IvguH+xMryuCj/JAUCu23uS6IngORPlkN8nvF3OJlfvJz+m2FxD4GoNOZn39zxn3ddy6ZuyI2xCk61xhCQegCSibgX5HGQv062ivHz2qaHdoB/rl9Tq4RlF+0RrJH/T5KYIhbDcJAAAAAElFTkSuQmCC";function at({name:I,projectId:R,classId:w,groupId:N,deleteGroup:E}){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"GroupTile",onClick:()=>{const l=new URL(window.location.origin);l.searchParams.set("classId",w),l.searchParams.set("projectId",R),l.searchParams.set("groupId",N),window.location.href=l.origin+"/Group/"+l.search},children:[e.jsx("h2",{className:"GroupName",children:I}),e.jsx("img",{src:st,alt:"delete group",className:"GroupTrashIcon",onClick:l=>{l.stopPropagation(),E(N)}})]})})}const nt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAqCAYAAAAnH9IiAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAALaADAAQAAAABAAAAKgAAAAD0iNlAAAADG0lEQVRYCe2ZTahNURTH37nE8zERno+JGTJRwuRl5nMoooRSDF5REhlIvZcYYECiDJTkEUk+egPFRGFgQEbkTRg8n+UrH0+4fv/j7Gt13r23s+/d994zuKv+d6999tpr/c866+6z971RRyLFYnE66nqwCHSBcSCkFHH2DQyB++ByFEWfab0l0gwIL6U5CkITlftK8p6BHog/qWRQ6XoE4VkM3gCdlYwaeP0dvldA/KtPjNEYbwKW8G3618FHEFL0VKeAjWBB4ngq7WpwPulna8j0AHiW4Ei2WbVbEUdP95KJedLXW4EJM82kq0ZviEop6At5zTifYfRMqkiPN5avjN5I9bVxPsHomVSRtqIsNENsnHgF8wmaJu0zt2W2bdLNSn070yEyzfpdANOq+cpjpk9A+C7ED+kGypEve7GcYROvzUtiraHtg/iIJVF7j1aIdnZbk8DfUwT66CvbY8A68AMcBP+FO3H7DrXa8bVc4NENHhtuuy2pPJZHB/uTe5DcAr4kZLdxA9sd8VySFjmIP6LZDD6oj+yAeFxSQWoaZ6twOgeM+NIoWo3yi3k6ng0A7cEle4g1XDdpnCzB2bHYZXM+9oUoj7HN4VqKEtWdaVzdAb1gNghdHlruJoG1wMmpukknJ5GLzmPIltLTEnzW+DxDvOMhysP4DKdCWE/uAnDHwX4IH1aEXJKG8Hy49QOd3iVXwIFY46Pu8nCOfFpITcTevX2HyeCgm8/YYvTTwJ1db6LvT8owNmsJaSIvBCImeQGWx9q/D+0zHOFb6Hsh/MeM57I8XiYEtSrtgvBvS1h6qzKd5mH7PXRUOoO2JKxB7khD9CcEn1uSaT2Xq0eaZLrfJp3OSKP67UzXmNmi7zxl2h4sq/7e4Ou8in2XGbPxzeXKqki/NcMrjd5I1cZ54xtI6/RD4PYBG3j360b0vv8EQor22pOBjk7dxrHie4n+SpjLDP0DMMprZhhjnbaX8UJxh9dMXgtMeIplLxjxjs/koXYjHVp3+hJWuNLxiIzrNK1Hpx2YviidoDSOXq9olRDRIfAAnIOwdG/5CxqR4HbNSg30AAAAAElFTkSuQmCC";function rt(){const[I,R]=s.useState([]),[w,N]=s.useState([]),[E,l]=s.useState([]),[b,de]=s.useState(""),[y,ue]=s.useState(!1),[a,Ae]=s.useState(""),[n,pe]=s.useState(""),B=s.useRef(null),k=s.useRef(null),[W,P]=s.useState(""),[x,je]=s.useState(""),g=s.useRef(null),[ge,C]=s.useState(""),[me,f]=s.useState(""),[v,Q]=s.useState(""),[T,Z]=s.useState(""),[O,V]=s.useState(""),[z,X]=s.useState(""),q=s.useRef(null),$=s.useRef(null),_=s.useRef(null),[D,ee]=s.useState(!1),m=s.useRef(null),[he,xe]=s.useState(),[F,L]=s.useState(""),[te,Ce]=s.useState(""),[i,h]=s.useState([]),[fe,se]=s.useState(!1),[Se,Ie]=s.useState(!0),[we,Ne]=s.useState([]),[M,Ee]=s.useState(""),[ke,J]=s.useState(!1),U=s.useRef(null),[Ge,oe]=s.useState(!1),[Re,be]=s.useState("");s.useEffect(()=>{A(),console.log("Fetched Students")},[]);async function A(){var ae;const t=await ie();je(t);const S=window.location.search,r=new URLSearchParams(S);if(!r.has("classId"))throw Error("missing class id!");if(!r.has("projectId"))throw Error("missing project id!");const o=r.get("classId");pe(o);const p=await Te(o),c=await ne(p.students);N(c);const d=r.get("projectId"),j=await De(o,d);de(j.name),P(j.name),Q(j.background),X(j.cardColor),Z(j.backgroundColor),V(j.evalBackgroundColor),Ae(d);const H=await Fe(t);ue(H);const Y=await Le(o,d);if(Y.sort((u,G)=>u.index-G.index),H)l(Y);else{const u=await Me(o,d,t);if(u!=null){ee(!0),Ce(u.id),be(u.name);const G=await ne(u.students);console.log(G),console.log(u.students),R(G)}else Ne(Y)}H&&(await Je(o,d)).length==0&&((ae=B.current)==null||ae.showModal()),Ie(!1)}const ye=async()=>{var t;await Ke(n,a,W,v,T,z,O),(t=k.current)==null||t.close(),await A()},Be=async()=>{var r,o,p;const t=i.map(c=>c.id);for(let c=0;c<i.length;c++){const d=i[c];if(await re(n,a,d.id)){C(`${d.name} is already in another group`),f("Unable to create group"),(r=g.current)==null||r.showModal();return}}if(E.find(c=>c.name==F)!=null){C("A group with that name already exists!"),f("Unable to create group"),(o=g.current)==null||o.showModal();return}await We(n,a,F,t),await A(),(p=m.current)==null||p.close()},Pe=async t=>{await Qe(n,a,t),await A()},ve=async()=>{var S,r;oe(!0);const t=i.map(o=>o.id);for(let o=0;o<i.length;o++){const p=i[o];if(await re(n,a,p.id)){C(`${p.name} is already in another group`),f("Unable to add students"),(S=g.current)==null||S.showModal();return}}await Ze(n,a,te,t),await A(),(r=U.current)==null||r.close(),oe(!1)};return e.jsxs(e.Fragment,{children:[Se?e.jsx("div",{className:"Loading"}):e.jsxs("div",{className:"Center "+v,style:{backgroundColor:T},children:[e.jsx("h2",{className:"Title",children:b}),y?e.jsxs("div",{className:"TeacherIcons",children:[e.jsx("img",{src:ot,alt:"copy project",className:"CopyIcon",onClick:async()=>{var t;se(!0),await Ue(n,a),C("Project copied successfully!"),f("Project Copied"),(t=g.current)==null||t.showModal()}}),e.jsx("img",{src:Xe,alt:"edit project",className:"EditIcon",onClick:()=>{var t;(t=k.current)==null||t.showModal()}}),e.jsx("img",{src:le,alt:"add group",className:"PlusIcon",onClick:()=>{var t;(t=m.current)==null||t.showModal()}})]}):D&&e.jsxs("div",{className:"StudentIcons",children:[e.jsx("img",{src:nt,alt:"leave group",className:"LeaveIcon",onClick:async()=>{await He(n,a,te,x),ee(!1),await A()}}),e.jsx("img",{src:le,alt:"add group",className:"PlusIcon",onClick:()=>{var t;(t=U.current)==null||t.showModal()}})]}),e.jsx("img",{src:$e,alt:"back",className:"BackArrow",onClick:()=>{const t=new URL(window.location.href);t.searchParams.delete("projectId"),window.location.href=t.origin+"/Projects/"+t.search}}),!y&&D&&e.jsx("h2",{className:"StudentGroupName",children:Re}),y?e.jsxs(e.Fragment,{children:[e.jsx("h3",{children:"Groups:"}),e.jsx("div",{className:"Students",children:E.map(t=>e.jsx(at,{name:t.name,groupId:t.id,projectId:a,classId:n,deleteGroup:Pe},t.id))})]}):D?e.jsxs(e.Fragment,{children:[e.jsx("h3",{children:"Students:"}),e.jsx("div",{className:"Students",children:I.map(t=>e.jsx(ze,{name:t.name,id:t.id,projectId:a,classId:n,projectName:b},t.id))})]}):e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("h3",{className:"joinGroupWarning",children:"Please join a group!"}),e.jsx("h2",{children:"Groups: "}),e.jsxs("select",{className:"groupsSelect",onChange:t=>{Ee(t.target.value)},children:[e.jsx("option",{value:"",children:"Select a group"}),we.map(t=>e.jsx("option",{value:t.id,children:t.name}))]}),e.jsx("br",{}),ke?e.jsx("div",{className:"LoadingJoin"}):e.jsx("button",{type:"button",onClick:async()=>{var t;if(J(!0),M==""){C("Please select a group!"),f("Unable to join group"),(t=g.current)==null||t.showModal(),J(!1);return}console.log(M),console.log(x),await Ye(n,a,M,x),await A(),J(!1)},children:"Join Group"})]}),e.jsx("br",{})]}),e.jsxs("dialog",{ref:B,className:"warningDialog",children:[e.jsx("label",{children:"This project has no evaluation template! You need to create one before you can evaluate students."}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{onClick:()=>{const t=new URL(window.location.origin);t.searchParams.set("projectId",a),t.searchParams.set("classId",n),window.location.href=t.origin+"/Project/Editor/"+t.search},children:"Create Eval Template"}),e.jsx("span",{children:" "}),e.jsx("button",{onClick:()=>{var t;(t=B.current)==null||t.close()},children:"Close"})]}),e.jsxs("dialog",{ref:k,className:"EditProjDialog",children:[e.jsx("h2",{children:"Edit Project"}),e.jsx("img",{src:K,alt:"close",className:"CloseIcon",onClick:()=>{var t;xe(k),(t=_.current)==null||t.showModal()}}),e.jsxs("form",{children:[e.jsxs("div",{className:"EditSides",children:[e.jsxs("div",{className:"EditLeft",children:[e.jsx("label",{htmlFor:"projectName",children:"Project Name:"}),e.jsx("span",{children:" "}),e.jsx("input",{type:"text",name:"projectName",id:"projectName",value:W,onChange:t=>{P(t.target.value)}}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{type:"button",onClick:()=>{const t=new URL(window.location.origin);t.searchParams.set("projectId",a),t.searchParams.set("classId",n),window.location.href=t.origin+"/Project/Editor/"+t.search},children:"Edit Project Template"})]}),e.jsxs("div",{className:"EditRight",children:[e.jsx("button",{type:"button",onClick:()=>{var t;(t=$.current)==null||t.showModal()},children:"Edit Background"}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{type:"button",onClick:()=>{var t;(t=q.current)==null||t.showModal()},children:"Edit Colors"})]})]}),e.jsx("button",{type:"button",onClick:ye,children:"Save Project"})]})]}),e.jsx(_e,{info:ge,Title:me,infoModalRef:g,onClose:()=>{if(!fe)return;se(!1);const t=new URL(window.location.href);t.searchParams.delete("projectId"),window.location.href=t.origin+"/Projects/"+t.search}}),e.jsxs("dialog",{ref:m,onClose:()=>{var t;L(""),h([]),(t=m.current)==null||t.close()},children:[e.jsx("h2",{children:"Create Group"}),e.jsx("img",{src:K,alt:"close",className:"CloseIcon",onClick:()=>{var t;L(""),h([]),(t=m.current)==null||t.close()}}),e.jsxs("form",{children:[e.jsx("label",{htmlFor:"groupName",children:"Group Name:"}),e.jsx("span",{children:" "}),e.jsx("input",{type:"text",name:"groupName",id:"groupName",value:F,onChange:t=>{L(t.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"",className:"InviteTitle",children:"Students: "}),e.jsx(ce,{name:"Student",content:w,currentUserId:x,defaultAddedContent:i,updateContent:t=>{h(t)}}),e.jsx("br",{}),e.jsx("button",{type:"button",onClick:Be,children:"Create Group"})]})]}),e.jsxs("dialog",{ref:U,onClose:()=>{h([])},children:[e.jsx("h2",{children:"Add Student to Group"}),e.jsx("img",{src:K,alt:"close",className:"CloseIcon",onClick:()=>{var t;h([]),(t=m.current)==null||t.close()}}),e.jsxs("form",{children:[e.jsx("label",{htmlFor:"",className:"InviteTitle",children:"Group Students: "}),e.jsx(ce,{name:"Student",content:w,currentUserId:x,defaultAddedContent:i,updateContent:t=>{h(t)}}),e.jsx("br",{}),Ge?e.jsx("div",{className:"LoadingJoin"}):e.jsx("button",{type:"button",onClick:ve,children:"Add Students"})]})]}),e.jsx(qe,{closeWarningRef:_,connectedRef:he,onYes:()=>{P(b)}}),e.jsx(et,{setBackground:Q,backgroundRef:$,currentBackground:v}),e.jsx(tt,{setBgColor:Z,colorRef:q,currentBgColor:T,isProject:!0,currentTileColor:z,setTileColor:X,currentEvalBgColor:O,setEvalBgColor:V})]})}async function ct(){await ie()||(window.location.href=window.location.origin+"/Login/")}(async()=>await ct())();Oe.createRoot(document.getElementById("root")).render(e.jsx(Ve.StrictMode,{children:e.jsx(rt,{})}));
