import{j as e,r,F as k,q,g as N,G as P,H as G,c as U,R as W}from"./auth-7a6rBG4F.js";import{T as A}from"./trash-arEgRoH7.js";import{C as z}from"./close-CDqjbHS0.js";import{B as K}from"./back_arrow-IdcwQJqZ.js";import{I as X}from"./info_dialog-q-ePwUyF.js";const p="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAKKADAAQAAAABAAAAKAAAAAB65masAAAE80lEQVRYCcWYW4iVVRTHzxmz8VYEaakp4UmdLpZ5yXDUSB8USSoL0akIAu2lJELwmi9KggoKPigqoj1oRXl5kAqyGYlkIC8YDNZoji9ZXiJomm4Wjb//8axxfd/Z58z3OTOnBf+z1157Xf5n7/3tb5+TzdyitLe3303ok2AMGAEGgf7gP9AGLoPz4BtwPJvN/k6bWrJpIiBVjf+zYC4YD5LG/4vvl+AA+AKy+hKJJFEBiPUi2yvgdTAwUebSThcY2gLJT0q73BzplCDkHsN9HRh1M6xD00ycBefAT0DLWAUGgOGgBtwPQtKIcRVEL4YGzVaWIORexXEZuM0CCq2SHwQNFGiNjUW65BiMYSZ4ETwYGcxkFLuMHPUxe/kuSbNgJWiOYQ/9R8pHlx4l9ilwOJbzW/p1paMCIwS8E0tymr4ejC4LeXqBN8EZ4CcgGUmCFsYCj9If2WVmsQTknAJOuVqayRkxt2gXhwnAf7MG+kOiXt3XI/ejwJM8Tn9osAID1eAIsGk/iZ4LOnejkRqaSc2e1d3t0+tIMFmEoqPBZDVPV4t1eqqlxjFyb3X5ayE72/p5ghjuxPCaGWl1fCQ6SC2GHNOAlkirUOrsM/d4uw3D9864mBx5bjaDCxjU4SrR4bs+r6X7eBl3fVGtwnNpQpkMvQo3upgH0KerbwRfcINHCNDrKK30dQF9nJ5IpeZRHPVWMtHBnqliKkfTjjAr7X6nV1r92BXUod5XM1jrjH+if+X6lVY/dwV7o08UwbHOeKqwH5ypciq1f6TaD67iWBHMOYPfA85cUbXZVcvplnKvM3j2znxDZU9MQpsFbi8ajH7RqfjeEfD5A9uHzFS589VzGCyCuqab6KoeFAr2Y2AH8E9r0BdjTQGh8SkY54QGCjbPob+WWDDRGVhKdKvWxu2qVHeSwHOo0gyK8V2FIDusi3KwLL8xi4sZ0GsoRFTLrx9SEp2j3+W16IeWeF/UVNTzHNpE8CowgvcVuTsDJOvpCkUC+fcwGsF6fDcUOSUzDHVuV7W8Lc4w0un/lzrKFW4RwSZn0H3Q70k31PMqtQdSJecqNYlMozPoaHjC9SutznAF9bB8LYKaQZ3gJv7iYLZKtb52I/u4tYqPdqofcgzmMNW3cs3/2+XwujOXVqk5ntFxzkM/azvOwL3ofxUG9WS/XdDTNLoFXQO/gE/TBEIui/9SF6MVjebAaQWw3wVqdeKnEmJ6A22bVEJMHfC151sCMc8LDjogPwP6l0ryM5jLFriS7/XQB3UfJvUHwN4weibmUVcPSccSZzC00V8NtCcleuR3kUDX+B4RcuvnwU5g5LR3Vxg5FY0sBwMN2HZpoCCjafeS6B4zdFdLTuXeBzQRJmvgUP7KR6B+BmwGfk8co19rWbrakut5oL9TfI23Qnk79qAfJFBPst6lz3g7uo6jzXzLSzF7oi559RpbDqbGAraTc1PMlu8GCWqEZBpbAhYC7/cP/cPgADhB4vxmRg8KeXTzmQbmgekgnutdcryPPSjeOehAgacZWAtC+7AV+0mgH90Xgf2BqVfmMFADHgehS+557Esh10RbUjolqEhI6tb9BngJhIphTiy/4rkD7IGcfrCXlUQELQNEdd+rA/qvUDOURppx1tvmI4jp4ppIUhG0jBBV3ENgMhgDckDHhWZa56iWWg+S7pqngV78F2hTy3W89FFrByfR/QAAAABJRU5ErkJggg==";function Y({handleRemoveElmt:o,element:s,handleUpdateElmt:a}){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"FreeResponseElmt EvalElmt",children:[e.jsxs("div",{className:"ElmtTopBar",children:[e.jsx("h2",{className:"ElmtTitle",children:"Free Response Question"}),e.jsx("img",{src:A,alt:"Remove elmt",className:"RemoveElmt",onClick:()=>{o()}})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"ResQuestion",children:"Question: "}),e.jsx("input",{type:"text",className:"ResQuestion",placeholder:"Question",defaultValue:s.Question,onChange:c=>{a({Question:c.target.value})}})]}),e.jsxs("div",{className:"ElmtHasComment",children:[e.jsx("label",{htmlFor:"",children:"Has Comment: "}),e.jsx("input",{type:"checkbox",checked:s.hasComment,onChange:c=>{a({hasComment:c.target.checked})}})]})]})})}function Q({handleChangeChoice:o,index:s,value:a,removeChoice:c}){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"Choice",children:[e.jsxs("label",{htmlFor:"Choice",className:"ChoiceText",children:["Choice #",s+1]}),e.jsx("input",{type:"text",name:"Choice",className:"ChoiceInput",value:a,onChange:h=>{o(h.target.value)}}),e.jsx("img",{src:A,alt:"delete",className:"RemoveChoice",onClick:c})]})})}function J({handleRemoveElmt:o,element:s,handleUpdateElmt:a}){const c=l=>i=>{const d=[...s.Answer.Choices];d[l]=i,a({Answer:{...s.Answer,Choices:d}})},h=l=>()=>{const i=[...s.Answer.Choices];i.splice(l,1),a({Answer:{...s.Answer,Choices:i}})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"MultiChoiceElmt EvalElmt",children:[e.jsxs("div",{className:"ElmtTopBar",children:[e.jsx("h2",{className:"ElmtTitle",children:"Multiple Choice Question"}),e.jsx("img",{src:A,alt:"Remove elmt",className:"RemoveElmt",onClick:()=>{o()}})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Question: "}),e.jsx("input",{type:"text",className:"ResQuestion",placeholder:"Question",defaultValue:s.Question,onChange:l=>{a({Question:l.target.value})}})]}),e.jsx("br",{}),e.jsxs("div",{className:"ElmtChoicesTitle",children:[e.jsx("label",{children:"Choices:"}),e.jsx("img",{src:p,alt:"Add Choice",className:"AddChoice",onClick:()=>{a({Answer:{...s.Answer,Choices:[...s.Answer.Choices,""]}})}})]}),e.jsx("div",{className:"ElmtChoices",children:s.Answer.Choices.map((l,i)=>e.jsx(Q,{index:i,value:l,handleChangeChoice:c(i),removeChoice:h(i)},i))}),e.jsxs("div",{className:"ElmtHasComment",children:[e.jsx("label",{htmlFor:"",children:"Has Comment: "}),e.jsx("input",{type:"checkbox",checked:s.hasComment,onChange:l=>{a({hasComment:l.target.checked})}})]})]})})}function O({handleRemoveElmt:o,element:s,handleUpdateElmt:a}){const c=l=>i=>{const d=[...s.Answer.Choices];d[l]=i,a({Answer:{...s.Answer,Choices:d}})},h=l=>()=>{const i=[...s.Answer.Choices];i.splice(l,1),a({Answer:{...s.Answer,Choices:i}})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"MultiChoiceElmt EvalElmt",children:[e.jsxs("div",{className:"ElmtTopBar",children:[e.jsx("h2",{className:"ElmtTitle",children:"Multiple Select Question"}),e.jsx("img",{src:A,alt:"Remove elmt",className:"RemoveElmt",onClick:()=>{o()}})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Question: "}),e.jsx("input",{type:"text",className:"ResQuestion",placeholder:"Question",defaultValue:s.Question,onChange:l=>{a({Question:l.target.value})}})]}),e.jsx("br",{}),e.jsxs("div",{className:"ElmtChoicesTitle",children:[e.jsx("label",{children:"Choices:"}),e.jsx("img",{src:p,alt:"Add Choice",className:"AddChoice",onClick:()=>{a({Answer:{...s.Answer,Choices:[...s.Answer.Choices,""]}})}})]}),e.jsx("div",{className:"ElmtChoices",children:s.Answer.Choices.map((l,i)=>e.jsx(Q,{index:i,value:l,handleChangeChoice:c(i),removeChoice:h(i)},i))}),e.jsxs("div",{className:"ElmtHasComment",children:[e.jsx("label",{htmlFor:"",children:"Has Comment: "}),e.jsx("input",{type:"checkbox",checked:s.hasComment,onChange:l=>{a({hasComment:l.target.checked})}})]})]})})}function Z({handleRemoveElmt:o,element:s,handleUpdateElmt:a}){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"RangeElmt EvalElmt",children:[e.jsxs("div",{className:"ElmtTopBar",children:[e.jsx("h2",{className:"ElmtTitle",children:"Range Question"}),e.jsx("img",{src:A,alt:"Remove elmt",className:"RemoveElmt",onClick:()=>{o()}})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"ResQuestion",children:"Question: "}),e.jsx("input",{type:"text",className:"ResQuestion",placeholder:"Question",defaultValue:s.Question,onChange:c=>{a({Question:c.target.value})}})]}),e.jsxs("div",{className:"MinMax",children:[e.jsxs("div",{className:"Extreme",children:[e.jsx("label",{htmlFor:"min",children:"Min: "}),e.jsx("input",{type:"number",className:"min",placeholder:"Min",defaultValue:s.Answer.Min,onChange:c=>{a({Answer:{...s.Answer,Min:parseInt(c.target.value)}})}}),e.jsx("span",{children:" "}),e.jsx("label",{htmlFor:"",children:"Min Title: "}),e.jsx("input",{type:"text",className:"minTitle",placeholder:"Min Title",defaultValue:s.Answer.MinTitle,onChange:c=>{a({Answer:{...s.Answer,MinTitle:c.target.value}})}})]}),e.jsxs("div",{className:"Extreme",children:[e.jsx("label",{htmlFor:"max",children:"Max: "}),e.jsx("input",{type:"number",className:"max",placeholder:"Max",defaultValue:s.Answer.Max,onChange:c=>{a({Answer:{...s.Answer,Max:parseInt(c.target.value)}})}}),e.jsx("span",{children:" "}),e.jsx("label",{htmlFor:"",children:"Max Title: "}),e.jsx("input",{type:"text",className:"maxTitle",placeholder:"Max Title",defaultValue:s.Answer.MaxTitle,onChange:c=>{a({Answer:{...s.Answer,MaxTitle:c.target.value}})}})]})]}),e.jsxs("div",{className:"ElmtHasComment",children:[e.jsx("label",{htmlFor:"",children:"Has Comment: "}),e.jsx("input",{type:"checkbox",checked:s.hasComment,onChange:c=>{a({hasComment:c.target.checked})}})]})]})})}function _(){const[o,s]=r.useState([]),a=r.useRef(null),[c,h]=r.useState(""),[l,i]=r.useState(""),[d,w]=r.useState(""),[f,v]=r.useState(""),[E,I]=r.useState(!1),[F,T]=r.useState(""),[S,R]=r.useState(""),g=r.useRef(null);r.useEffect(()=>{(async()=>{const t=window.location.search,n=new URLSearchParams(t);if(n.has("userId")){I(!0);const M=n.get("userId");v(M);const L=await k(M);if(s(L.default_eval_template),!n.has("background"))throw Error("missing background");w(n.get("background"));return}if(!n.has("projectId"))throw Error("missing project id!");if(!n.has("classId"))throw Error("missing class id!");const m=n.get("projectId"),u=n.get("classId"),b=await q(u,m);s(b.eval_template),w(b.background),i(m),h(u);const H=await N();v(H)})()},[]);const j=t=>()=>{const n=o.filter((m,u)=>m.id!=t);s(n)};function x(){let t=new Date().getTime();return t=Math.floor(t*Math.random()*100),t}function B(t,n,m){const u=[...t];return u[n]=m,u}const C=t=>n=>{s(B(o,t,{...o[t],...n}))},y=async()=>{await P(c,l,o);const t=new URL(window.location.href);window.location.href=t.origin+"/Project/"+t.search},D=async()=>{var t;await G(f,o),R("Saved as Default Template"),T("Successfully saved teemplate as default"),(t=g.current)==null||t.showModal()},V=async()=>{var n;const t=await k(f);s([...t.default_eval_template]),R("Loaded Default Template"),T("Successfully loaded default teemplate"),(n=g.current)==null||n.showModal()};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"Center "+d,children:[e.jsx("h2",{className:"Title",children:"Evaluation Editor"}),e.jsx("img",{src:K,alt:"back",className:"BackArrow",onClick:()=>{const t=new URL(window.location.href);E?(t.searchParams.delete("userId"),window.location.href=t.origin+"/Dashboard/"):window.location.href=t.origin+"/Project/"+t.search}}),o.map((t,n)=>t.Answer.Type=="FreeResponse"?e.jsx(Y,{handleRemoveElmt:j(t.id),element:t,handleUpdateElmt:C(n)},t.id):t.Answer.Type=="MultiChoice"?e.jsx(J,{handleRemoveElmt:j(t.id),element:t,handleUpdateElmt:C(n)},t.id):t.Answer.Type=="MultiSelect"?e.jsx(O,{handleRemoveElmt:j(t.id),element:t,handleUpdateElmt:C(n)},t.id):t.Answer.Type=="Range"?e.jsx(Z,{handleRemoveElmt:j(t.id),element:t,handleUpdateElmt:C(n)},t.id):null),e.jsx("br",{}),e.jsx("img",{src:p,alt:"Add element",id:"AddElement",onClick:()=>{a.current.showModal()}}),e.jsx("br",{}),!E&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:V,children:"Load Default Template"}),e.jsx("br",{}),e.jsx("button",{onClick:y,children:"Save Template"}),e.jsx("br",{})]}),e.jsx("button",{onClick:D,children:"Save as Default Template"}),e.jsx("br",{})]}),e.jsxs("dialog",{ref:a,children:[e.jsx("h2",{children:"Element to Add"}),e.jsx("img",{src:z,alt:"close",className:"CloseIcon",onClick:()=>{var t;(t=a.current)==null||t.close()}}),e.jsx("button",{onClick:()=>{s([...o,{Question:"",Answer:{Type:"FreeResponse"},hasComment:!1,id:`frq-${x()}`}]),a.current.close()},children:"Free Response"}),e.jsx("span",{children:" "}),e.jsx("button",{onClick:()=>{s([...o,{Question:"",Answer:{Type:"MultiChoice",Choices:[]},hasComment:!1,id:`mcq-${x()}`}]),a.current.close()},children:"Multiple Choice"}),e.jsx("span",{children:" "}),e.jsx("button",{onClick:()=>{s([...o,{Question:"",Answer:{Type:"MultiSelect",Choices:[]},hasComment:!1,id:`msq-${x()}`}]),a.current.close()},children:"Multiple Select"}),e.jsx("span",{children:" "}),e.jsx("button",{onClick:()=>{s([...o,{Question:"",Answer:{Type:"Range",Min:0,Max:10,MinTitle:"",MaxTitle:""},hasComment:!1,id:`rq-${x()}`}]),a.current.close()},children:"Range"})]}),e.jsx(X,{Title:S,info:F,infoModalRef:g})]})}async function $(){await N()||(window.location.href=window.location.origin+"/Login/")}(async()=>await $())();U.createRoot(document.getElementById("root")).render(e.jsx(W.StrictMode,{children:e.jsx(_,{})}));
