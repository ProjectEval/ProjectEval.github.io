import{r as s,j as e,s as N,g as b,i as E,a as F,b as I,c as L,R as U}from"./auth-OIc4apUQ.js";import{B as k}from"./back_arrow-IdcwQJqZ.js";import{E as y}from"./error_dialog-qsErQp_K.js";function R(){const[t,r]=s.useState(""),[o,i]=s.useState(""),[h,g]=s.useState(!1),l=s.useRef(null),[m,c]=s.useState(""),[u,p]=s.useState("");async function w(){g(!0),await N(t,o,x);const a=await b();console.log(a);const d=await E(a);console.log(d),d?localStorage.setItem("userType","Teacher"):localStorage.setItem("userType","Student"),window.location.href=window.location.origin+"/Dashboard/"}const x=(a,d)=>{var j;g(!1),c(a),p(d),(j=l.current)==null||j.showModal()},f=()=>{window.location.href="/Login/ForgotPassword/"+window.location.search};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"Center",children:[e.jsx("h2",{className:"Title",children:"Sign In"}),e.jsx("img",{src:k,alt:"back",className:"BackArrow",onClick:()=>{window.location.href="/Login/"+window.location.search}}),e.jsx("label",{htmlFor:"email",children:"Email "}),e.jsx("input",{type:"text",id:"email",value:t,onChange:a=>{r(a.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"password",children:"Password "}),e.jsx("input",{type:"password",id:"password",value:o,onChange:a=>{i(a.target.value)}}),e.jsx("br",{}),e.jsx("a",{className:"ForgotPassword",onClick:f,children:"Forgot Password?"}),e.jsx("br",{}),h?e.jsx("div",{className:"Loading"}):e.jsx("button",{onClick:w,children:"Sign In"}),e.jsx("br",{})]}),e.jsx(y,{error:m,errorTitle:u,errorModalRef:l})]})}function B(){const[t,r]=s.useState(""),[o,i]=s.useState(""),[h,g]=s.useState(""),[l,m]=s.useState(""),[c,u]=s.useState(""),[p,w]=s.useState(!1),x=s.useRef(null),[f,a]=s.useState(""),[d,j]=s.useState("");async function C(){if(w(!0),o!=h){S("Passwords do not match!","Passwords do not match!");return}if(await F(l)){S("This name is already taken!","Name Taken");return}localStorage.setItem("userType",c),await I(l,t,o,c=="Teacher",v,S)}function v(){if(new URLSearchParams(window.location.search).get("classId")!=null){window.location.href="/JoinClass/"+window.location.search;return}window.location.href="/Dashboard/"}const S=(n,P)=>{var T;w(!1),a(n),j(P),(T=x.current)==null||T.showModal()};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"Center",children:[e.jsx("h2",{className:"Title",children:"Sign Up"}),e.jsx("img",{src:k,alt:"back",className:"BackArrow",onClick:()=>{c==""?window.location.href="/Login/"+window.location.search:(u(""),r(""),i(""),m(""))}}),c==""?e.jsxs("div",{className:"Options",children:[e.jsx("button",{onClick:()=>{u("Teacher")},children:"Teacher"}),e.jsx("button",{onClick:()=>{u("Student")},children:"Student"})]}):e.jsxs(e.Fragment,{children:[e.jsx("label",{htmlFor:"name",children:"Name "}),e.jsx("input",{type:"text",id:"name",value:l,onChange:n=>{m(n.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"email",children:"Email "}),e.jsx("input",{type:"text",id:"email",value:t,onChange:n=>{r(n.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"password",children:"Password "}),e.jsx("input",{type:"password",id:"password",value:o,onChange:n=>{i(n.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password "}),e.jsx("input",{type:"password",id:"confirmPassword",value:h,onChange:n=>{g(n.target.value)}}),e.jsx("br",{}),p?e.jsx("div",{className:"Loading"}):e.jsx("button",{onClick:C,children:"Sign Up"})]}),e.jsx("br",{})]}),e.jsx(y,{error:f,errorTitle:d,errorModalRef:x})]})}function M(){const[t,r]=s.useState("");return s.useEffect(()=>{async function o(){const i=await b();console.log(i)}o()},[]),e.jsx(e.Fragment,{children:t==""?e.jsxs("div",{className:"Login Center",children:[e.jsx("h2",{className:"Title",children:"Login"}),e.jsxs("div",{className:"Options",children:[e.jsx("button",{onClick:()=>{r("signin")},children:"Sign In"}),e.jsx("button",{onClick:()=>{r("signup")},children:"Sign Up"})]}),e.jsx("br",{})]}):t=="signin"?e.jsx(R,{}):e.jsx(B,{})})}async function D(){await b()&&(window.location.href=window.location.origin+"/Dashboard/")}(async()=>await D())();L.createRoot(document.getElementById("root")).render(e.jsx(U.StrictMode,{children:e.jsx(M,{})}));
