import{j as e,r as t,g as Q,o as ne,I as le,a as ie,J as de,K as Ae,h as ue,f as he,L as ge,M as je,N as me,O as Ce,P as xe,c as fe,R as we}from"./auth-7a6rBG4F.js";import{T as ke}from"./trash-arEgRoH7.js";import{P as pe}from"./plus-Ip2amvQB.js";import{S as v}from"./search_bar-L5nwHk8M.js";import{B as Se}from"./back_arrow-IdcwQJqZ.js";import{E as Re,C as Ie}from"./close_warning_dialog-_CwKV2tA.js";import{C as K}from"./close-CDqjbHS0.js";import{I as Pe}from"./info_dialog-q-ePwUyF.js";import{C as Ee,a as Ne}from"./choose_colors_dialog-pD3VPFlA.js";function Te({name:i,id:j,classId:m,isTeahcer:C,deleteProject:d}){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"ProjectTile",onClick:()=>{const c=new URL(window.location.origin);c.searchParams.set("classId",m),c.searchParams.set("projectId",j),window.location.href=c.origin+"/Project/"+c.search},children:[e.jsx("h2",{className:"ProjectName",children:i}),C&&e.jsx("img",{className:"ProjectTrashIcon",src:ke,alt:"Trash Icon",onClick:c=>{c.stopPropagation(),d()}})]})})}const Be="data:image/png;base64,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";function be(){const[i,j]=t.useState([]),[m,C]=t.useState(""),[d,c]=t.useState(!1),[n,F]=t.useState(""),[J,L]=t.useState([]),[Y,Z]=t.useState([]),[D,X]=t.useState([]),[S,R]=t.useState([]),A=t.useRef(null),u=t.useRef(null),[I,P]=t.useState(""),[x,G]=t.useState(""),[ye,O]=t.useState(""),[f,E]=t.useState(""),N=t.useRef(null),T=t.useRef(null),[w,W]=t.useState(""),[z,V]=t.useState([]),k=t.useRef(null),[q,B]=t.useState(""),[_,b]=t.useState(""),[p,H]=t.useState(""),y=t.useRef(null);t.useEffect(()=>{h(),console.log("Fetched Projects")},[]);async function h(){const s=await Q();G(s);const a=window.location.search,r=new URLSearchParams(a);if(!r.has("classId"))throw Error("missing class id!");const o=r.get("classId");F(o);const l=await ne(o);C(l.name),P(l.name),H(l.background),O(l.background),E(l.backgroundColor);const M=await le(l.teachers),te=M.filter(re=>re.id!=s);L(te),console.log(M);const U=await ie(s);c(U);let g=null;U?(console.log("IS a teacher"),g=await Ae(o)):g=await de(s,o),console.log(g),j(g);const ae=await ue();V(ae);const oe=await he();Z(oe);const ce=await ge(o);R(ce)}const $=async()=>{var a,r;if(await je(n,w)){B("This project name is already taken!"),b("Project Name Taken"),(a=k.current)==null||a.showModal();return}await me(w,n),(r=A.current)==null||r.close(),h()},ee=async()=>{var r;const s=D.map(o=>o.id);s.push(x);const a=S.map(o=>o.id);await Ce(n,I,a,s,p,f),(r=u.current)==null||r.close(),h()},se=s=>async()=>{await xe(n,s),h()};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"Center "+p,style:{backgroundColor:f},children:[e.jsx("h2",{className:"Title",children:m}),e.jsx("h3",{children:"Projects:"}),d?e.jsxs("div",{className:"TeacherIcons",children:[e.jsx("img",{src:Be,alt:"create join link",className:"LinkIcon",onClick:async()=>{var a;const s=window.location.origin+"/JoinClass/?classId="+n;await navigator.clipboard.writeText(s),B("Copied join link to clipboard!"),b("Copied!"),(a=k.current)==null||a.showModal()}}),e.jsx("img",{src:Re,alt:"edit class",className:"EditIcon",onClick:()=>{var s;(s=u.current)==null||s.showModal()}}),e.jsx("img",{src:pe,alt:"add project",className:"PlusIcon",onClick:()=>{var s;(s=A.current)==null||s.showModal()}})]}):null,e.jsx("img",{src:Se,alt:"back",className:"BackArrow",onClick:()=>{window.location.href="/Dashboard/"}}),e.jsx("div",{className:"Projects",children:i.map(s=>e.jsx(Te,{name:s.name,id:s.id,classId:n,isTeahcer:d,deleteProject:se(s.id)},s.id))}),e.jsx("br",{})]}),e.jsxs("dialog",{ref:A,children:[e.jsx("h2",{children:"Create Project"}),e.jsx("img",{src:K,alt:"close",className:"CloseIcon",onClick:()=>{var s;(s=A.current)==null||s.close()}}),e.jsxs("form",{children:[e.jsx("label",{htmlFor:"projectName",children:"Project Name:"}),e.jsx("span",{children:" "}),e.jsx("input",{type:"text",name:"projectName",id:"projectName",value:w,onChange:s=>{W(s.target.value)}}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{type:"button",onClick:$,children:"Create Project"})]})]}),e.jsxs("dialog",{ref:u,className:"EditClassDialog",children:[e.jsx("h2",{children:"Edit Class"}),e.jsx("img",{src:K,alt:"close",className:"CloseIcon",onClick:()=>{var s;(s=y.current)==null||s.showModal()}}),e.jsxs("form",{children:[e.jsx("label",{htmlFor:"className",children:"Class Name:"}),e.jsx("span",{children:" "}),e.jsx("input",{type:"text",name:"className",id:"className",value:I,onChange:s=>{P(s.target.value)}}),e.jsx("br",{}),e.jsxs("div",{className:"Invitees",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",className:"InviteTitle",children:"Other Teachers: "}),e.jsx(v,{name:"Teacher",content:Y,currentUserId:x,defaultAddedContent:J,updateContent:s=>{X(s)}})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"",className:"InviteTitle",children:"Students: "}),e.jsx(v,{name:"Student",content:z,currentUserId:x,defaultAddedContent:S,updateContent:s=>{R(s)}})]})]}),e.jsx("br",{}),e.jsx("button",{type:"button",onClick:()=>{var s;(s=N.current)==null||s.showModal()},children:"Edit Background"}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{type:"button",onClick:()=>{var s;(s=T.current)==null||s.showModal()},children:"Edit Color"}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("button",{type:"button",onClick:ee,children:"Save Class"})]})]}),e.jsx(Ie,{closeWarningRef:y,connectedRef:u}),e.jsx(Pe,{info:q,Title:_,infoModalRef:k}),e.jsx(Ee,{setBackground:H,backgroundRef:N,currentBackground:p}),e.jsx(Ne,{setBgColor:E,colorRef:T,currentBgColor:f,isProject:!1})]})}async function He(){await Q()||(window.location.href=window.location.origin+"/Login/")}(async()=>await He())();fe.createRoot(document.getElementById("root")).render(e.jsx(we.StrictMode,{children:e.jsx(be,{})}));
