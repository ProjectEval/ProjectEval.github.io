import{r as n,j as s,i as N,I as w,x as L}from"./auth-OIc4apUQ.js";import{T as E}from"./close-KeMSzLwU.js";function B({name:h,content:r,updateContent:f,defaultAddedContent:i,currentUserId:c}){const[o,d]=n.useState(""),[S,g]=n.useState([]),[j,m]=n.useState(!1),[v,x]=n.useState(!1),[l,u]=n.useState([]),[p,C]=n.useState("");return n.useEffect(()=>{(async()=>{if(console.log(c),c=="")return;if(await N(c)){const t=await w(c);C(t.name)}else{const t=await L(c);C(t.name)}})()},[c]),n.useEffect(()=>{i!=null&&(u(i),console.log("Set added content"))},[i]),n.useEffect(()=>{console.log(o),console.log(l);const e=l.map(t=>t.name);let a=r.filter(t=>t.name.toLowerCase().includes(o.toLowerCase())&&!e.includes(t.name)&&t.name.toLowerCase()!=p.toLowerCase());a.length==1&&a[0].name.toLowerCase()==o.toLowerCase()&&(a=[]),console.log(a),g(a)},[o,r,l]),s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"addedContents",children:l.map(e=>s.jsxs("div",{className:"addedContent",children:[s.jsx("span",{children:e.name}),s.jsx("img",{src:E,alt:`remove ${h}`,className:"TrashIcon",onClick:()=>{u(l.filter(a=>a.id!=e.id)),f(l.filter(a=>a.id!=e.id))}})]},e.id))}),s.jsxs("div",{className:"AddContentQ",children:[s.jsxs("div",{className:"ContentsSearchBar",onMouseEnter:()=>{x(!0)},onMouseLeave:()=>{x(!1)},children:[s.jsx("input",{type:"text",value:o,onBlur:()=>{v||m(!1)},onSelect:()=>{m(!0)},onChange:e=>{d(e.target.value)}}),j&&S.length>0?s.jsx("div",{className:"SearchResults",children:S.map(e=>s.jsx("div",{className:"SearchResult",onClick:()=>{d(e.name)},children:s.jsxs("span",{children:[" ",e.name]})},e.id))}):null]}),s.jsxs("button",{className:"addContentBtn",type:"button",onClick:()=>{o!=""&&(u([...l,r.filter(e=>e.name==o)[0]]),f([...l,r.filter(e=>e.name==o)[0]]),d(""),m(!1))},children:["Add ",h]})]})]})}export{B as S};
