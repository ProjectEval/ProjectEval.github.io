import{r as s,j as e,s as F,g as S,a as E,b as L,d as R,c as U,R as M}from"./auth-x3Nz2WY_.js";import{B as k}from"./back_arrow-IdcwQJqZ.js";import{I as y}from"./info_dialog-csbS-ued.js";function B({background:c,setLoginState:a}){const[t,o]=s.useState(""),[r,i]=s.useState(""),[d,u]=s.useState(!1),g=s.useRef(null),[h,m]=s.useState(""),[x,b]=s.useState("");async function w(){u(!0),await F();const l=await S();console.log(l);const f=await E(l);console.log(f),f?localStorage.setItem("userType","Teacher"):localStorage.setItem("userType","Student"),window.location.href=window.location.origin+"/Dashboard/"}const j=()=>{window.location.href="/Login/ForgotPassword/"+window.location.search};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"Center "+c,children:[e.jsx("h2",{className:"Title",children:"Sign In"}),e.jsx("img",{src:k,alt:"back",className:"BackArrow",onClick:()=>{a(""),o(""),i("")}}),e.jsx("label",{htmlFor:"email",children:"Email "}),e.jsx("input",{type:"text",id:"email",value:t,onChange:l=>{o(l.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"password",children:"Password "}),e.jsx("input",{type:"password",id:"password",value:r,onChange:l=>{i(l.target.value)}}),e.jsx("br",{}),e.jsx("a",{className:"ForgotPassword",onClick:j,children:"Forgot Password?"}),e.jsx("br",{}),d?e.jsx("div",{className:"Loading"}):e.jsx("button",{onClick:w,children:"Sign In"}),e.jsx("br",{})]}),e.jsx(y,{info:h,Title:x,infoModalRef:g})]})}function D({background:c,setLoginState:a}){const[t,o]=s.useState(""),[r,i]=s.useState(""),[d,u]=s.useState(""),[g,h]=s.useState(""),[m,x]=s.useState(""),[b,w]=s.useState(!1),j=s.useRef(null),[l,f]=s.useState(""),[C,P]=s.useState("");async function v(){if(w(!0),r!=d){p("Passwords do not match!","Passwords do not match!");return}if(await L(g)){p("This name is already taken!","Name Taken");return}localStorage.setItem("userType",m),await R(g,t,r,m=="Teacher",I,p)}function I(){if(new URLSearchParams(window.location.search).get("classId")!=null){window.location.href="/JoinClass/"+window.location.search;return}window.location.href="/Dashboard/"}const p=(n,N)=>{var T;w(!1),f(n),P(N),(T=j.current)==null||T.showModal()};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"Center "+c,children:[e.jsx("h2",{className:"Title",children:"Sign Up"}),e.jsx("img",{src:k,alt:"back",className:"BackArrow",onClick:()=>{m==""?(a(""),o(""),i(""),h("")):(x(""),o(""),i(""),h(""))}}),m==""?e.jsxs("div",{className:"Options",children:[e.jsx("button",{onClick:()=>{x("Teacher")},children:"Teacher"}),e.jsx("button",{onClick:()=>{x("Student")},children:"Student"})]}):e.jsxs(e.Fragment,{children:[e.jsx("label",{htmlFor:"name",children:"Name "}),e.jsx("input",{type:"text",id:"name",value:g,onChange:n=>{h(n.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"email",children:"Email "}),e.jsx("input",{type:"text",id:"email",value:t,onChange:n=>{o(n.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"password",children:"Password "}),e.jsx("input",{type:"password",id:"password",value:r,onChange:n=>{i(n.target.value)}}),e.jsx("br",{}),e.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password "}),e.jsx("input",{type:"password",id:"confirmPassword",value:d,onChange:n=>{u(n.target.value)}}),e.jsx("br",{}),b?e.jsx("div",{className:"Loading"}):e.jsx("button",{onClick:v,children:"Sign Up"})]}),e.jsx("br",{})]}),e.jsx(y,{info:l,Title:C,infoModalRef:j})]})}function A(){const[c,a]=s.useState(""),[t,o]=s.useState("Hex");return s.useEffect(()=>{const r=["RedPolygon","FieryPolygon","Hex"],i=Math.floor(Math.random()*r.length);o(r[i]);async function d(){const u=await S();console.log(u)}d()},[]),e.jsx(e.Fragment,{children:c==""?e.jsxs("div",{className:"Login Center "+t,children:[e.jsx("h2",{className:"Title",children:"Login"}),e.jsxs("div",{className:"Options",children:[e.jsx("button",{onClick:()=>{a("signin")},children:"Sign In"}),e.jsx("button",{onClick:()=>{a("signup")},children:"Sign Up"})]}),e.jsx("br",{})]}):c=="signin"?e.jsx(B,{background:t,setLoginState:a}):e.jsx(D,{background:t,setLoginState:a})})}async function H(){await S()&&(window.location.href=window.location.origin+"/Dashboard/")}(async()=>await H())();U.createRoot(document.getElementById("root")).render(e.jsx(M.StrictMode,{children:e.jsx(A,{})}));
